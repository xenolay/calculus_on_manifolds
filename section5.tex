\section{鎖体上の微分形式とその積分}

本節では微分形式を定義して Stokes の定理を定式化する．Spivak にも述べてあるように，適切な諸概念を準備した上であれば，Stokes の定理の証明は特に難しくない．裏返せば，証明が当たり前になるように諸概念を用意することが本節の目標である．

\setcounter{subsection}{-1} % いろいろ思うところがあってわざとやっている．
\subsection{微分形式の定義に向けて}

微分形式の定義には種々の代数的な概念が必要になる．のだが，なぜそれらの概念が必要なのかすぐには了解し難いと思われるので，厳密性を抜きにした発見的考察を紹介する．以下の考察は古田幹雄「微分形式と Stokes の定理」（別冊・数理科学「多様体の広がり」，サイエンス社，2008）を参考にした．

このノートの目標が微分可能多様体に対する Stokes の定理であること，この定理が微積分学の基本定理を抽象化したものであることをまえがきで述べた．ところで微分可能多様体とは，大雑把に言えば曲線や曲面の抽象化である．ということで Stokes の定理を理解するということは，曲線や曲面の上で微積分をどう展開するかを理解することと不可分であると言ってよいだろう．

ところで，このノートにおいて積分を定義し，その性質について調べてきた．積分の定義を思い出してみる；単関数$f = \sum a_i 1_{A_i}$の積分は$\int f \dif \mu = \sum a_i \mu(A_i)$で与えられていた．非負可測関数$f \colon X \to [0,\infty]$に対しては，
\begin{equation}
\int f \dif \mu \coloneqq \sup \left\{ \int g \dif \mu \ \middle|  \ 0 \leq g \leq f, g {は単関数} \right\}
\end{equation}によって定義した．即ち，可測関数を単関数によって下から近似することで求めた．単関数によって下から近似するとは，おおらかに言えば，空間$X$をいくつかの可測集合$\set{A_i}$に分割し，各集合$A_i$における近似値$a_i$を定めることであった．直感的には，$X$の分割$A_i$が何かしらの意味で細かくなればなるほど近似の精度が良くなっていくと思われるし，実際に\cref{非負単関数の列}の証明では，$X$の分割を細かくしていくことで，所与の可測関数に収束する単関数の列を作った．ということで，大雑把で感覚的な物言いをすると，$X$の「とても細かい分割」$\set{A_i}$が与えられているとき，$a_i \in A_i$を任意に取れば
\begin{equation}
\int f \dif \mu \approx \sum_{A_i} f(a_i) \mu(A_i)
\end{equation}という近似式が成り立つ，ということができよう．

さて，このような積分の概念を，一般の「曲面」に一般化することを考えよう．一般的な「曲面」の定義を考えるのも骨が折れそうなので，いったん具体的に，$\Real^3$内の単位球面
\begin{equation}
\Sphere^2 \coloneqq \set{ (x^1, x^2, x^3) \in \Real^3 | (x^1)^2 + (x^2)^2 + (x^3)^2 = 1}
\end{equation}を例にして考えることにしたい．もっと即物的に言えば$\Sphere^2$を宇宙$\Real^3$の中にある地球表面のモデルだと思ってもよい\footnote{ある時刻での宇宙が$\Real^3$でモデリングできるかどうかはここでは問題にしない．}．$f \colon \Sphere^2 \to \Real$の「積分」を定義するための道筋を考えることがここでの目標である．$f$に具体的なイメージがほしければ，地表における何かしらの物質の密度分布が与えられていると思って，その「地球での全質量」を求めようとしていると思えばよい．

\begin{que}[*]
もちろん積分を定義したいだけであれば$\Sphere^2$上の「Lebesgue 測度から標準的に定まる」測度が作れればよい．この測度は表面測度と呼ばれる．表面測度の構成だけを目的にするならばこのような発見的考察をしなくとも済むことが知られている．のだが，そのように議論すると微分形式と表面測度の繋がりがわからないままになると思う．
\end{que}

測度空間における（あるいは，Lebesgue 測度に関する）積分のやり方に則れば，適当な部分集合$A \subset \Sphere^2$に対してその「大きさ」$\mu(A)$が定まればよさそうだとわかる．いの一番に考えつくのは，（さながら地図に緯線と経線を引くが如く）$A$に適当な座標軸を引いて$\Real^2$の部分集合と同一視し，$A$に2次元 Lebesgue 測度を入れてしまうことである．のだが，このやり方には2つの問題がある．
\begin{itemize}
\item 測度が座標軸のとり方に依存して定まっているが，現実世界で考えると，長さの基準を決めるのは地図帳の出版社ではなくて光速である．$\Sphere^2$上に適当に入れた座標に依存することがあってはならない．
\item 紙に印刷された世界地図は，実際には長さや面積の情報を正確に反映できていない．そこから類推するに，いきなり大域的な考察をすると何かしらの「歪み」に突き当たりそうなので，考察は局所的にしたほうが安全そうである．
\end{itemize}
ということで，任意の部分集合$A \subset \Sphere^2$を考えるのはやめて，考察を局所的にする．すなわち，ある点$m \in \Sphere^2$のまわりに広がった「うんと小さい領域」$M \subset \Sphere^2$を考えて，$M$上だけで測度を作ろうとすることで，曲面の大域的な歪みを無視できるようにする．また，$M$には座標軸を入れず，ある程度小さなベクトルだけを考えることにして，$m$を原点とする2次元線型空間とみなしてみる．$M$上には（例えば光速から計算された）長さや面積の情報がアプリオリに決まっていると考えて，$m$に足を持つような2つの小さいベクトル$v_m, w_m \in M$の張る平行四辺形の面積を$\omega_m(v_m,w_m)$と書く．やや天下りなのだが，$\omega_m$に見出せそうな性質を列挙しておく；
\begin{itemize}
\item $v,w$は充分小さいので，$\omega_m$は各引数ごとに線型であることにする．
\item 同じ方向を向いた2本のベクトルが張る平行四辺形の面積は0だと思うので，$\omega_m(v_m,v_m) = 0$とする．
\item ベクトルが右手系なのか左手系なのかを込めて，符号つきで面積を測ることにして，$\omega_m(v_m,w_m) = - \omega_m(w_m,v_m)$とする．
\end{itemize}
そのように局所的に作った$\omega_m$という量を，いろいろなところで一斉に考えて，関数との値と掛け合わせて足し上げることで，積分の定義が得られるかもしれない．すなわち，いい感じに$\Sphere^2$を細かな領域に分割した上で
\begin{equation}
\int f \omega \approx \sum_{M \subset \Sphere^2} f(m) \cdot \omega_m(v_m, w_m).
\end{equation}として「$f \omega$の積分」を定義しようと試みるのである．実際にはこの方針に基づいた試みは（もちろん適切な，決して短いとは言い難い準備と修正が必要になるものの）驚くことにうまく行ってしまう．特にこの$\omega_m$を適切に定式化することで，曲面における測度の「もと」が得られることがわかっている．この節は$\omega_m$ならびに関係する概念たちをきちんと捉えるまでの道筋を整備することに割かれると言っても過言ではない．

ここまで出てきた概念がどのように厳密化されるのかを列挙して，この項のむすびとする．

\begin{itemize}
\item 「$m$の周りに広がったうんと小さい領域$M$」は，「$m$における接ベクトル空間$T_m \Sphere^2$」となる．$v_m,w_m$は実際には$T_m \Sphere^2$の元と考えることができる．$T_m \Sphere^2$の元を接ベクトルという．
\item 上にあらわれた$\omega_m$を，$m$に関する写像だとみなしたもの$m \mapsto \omega_m$を微分形式という．即ち，接ベクトルをいくつか受け取れる交代的多重線型写像が曲面の各点で定まっているとき，それを微分形式と呼ぶ．ここでの発見的考察に拠って得ようとした「積分」とは，微分形式の積分にほかならない．
\item 「長さや面積の情報がアプリオリに決まっている」という言葉を厳密に述べれば，「多様体$\Sphere^2$上に Riemann 計量が与えられている」となる．「光速から計算された」という文面は，「包含写像$\Sphere^2 \hookrightarrow \Real^3$から定まる誘導計量が与えられた」と言い換えることで表現できる．
\item ここで「曲面」と呼ばれているものは，数学的には微分可能多様体と呼ばれるものの一例である．
\end{itemize}

\subsection{双対空間とテンソル積}

微分形式を定義するのに必要な線型代数の事項として，双対空間とテンソル積，ならびに関連した話題について述べる．以下しばらく，$V$ならびに$W$は線型空間とする．

\begin{defi}
$V^* \coloneqq \set{f \colon V \to \Real | f は線型写像 }$を$V$の双対空間という．
\end{defi}

\begin{que}
$V^*$は線型空間の構造を持つ．やるだけでめんどくさいので証明を省いてます．
\end{que}

\begin{defi}
$\set{v_1, \dots, v_n}$を$V$の基底とする．各$v_i$（$1 \leq i \leq n$）に対し，線型写像$w^i \colon V \to \Real$を，$w^i(v_j) = \delta^i_j$で定める．但し，右辺は Kronecker のデルタ．このとき，$\set{w^1, \dots, w^n}$は$V^*$の基底となる．この基底を$\set{v_1, \dots, v_n}$の双対基底という．$\set{v_1, \dots, v_n}$の双対基底を$\set{v_1^*, \dots, v_n^*}$のように書くことも多い．
\end{defi}

\begin{que}\label{双対空間は縦ベクトル}
$\Real^n$が「縦ベクトルからなる空間」だとすれば$(\Real^n)^*$は「横ベクトルからなる空間」であると捉えられないこともない，ということを下支えするのが以下の命題である；$x \in \Real^n$に対し，$\varphi_x \in (\Real^n)^*$を$\varphi_x(y) \coloneqq \langle x,y \rangle$で定める．写像$T \colon \Real^n \ni x \mapsto \varphi_x \in (\Real^n)^*$は線型同型写像である．ちなみにこの同型写像は標準内積に依存しているので，特に基底に依存して定まる同型写像である．その意味で「自然ではない」という言い方がされることがあるが，私は自然性のことをすべて忘れました．
\end{que}

\begin{que}[**]
ちなみにこの直感は無限次元だと破壊されるので，程々にしておくのが良いらしい…が，私は平気な顔して横ベクトルのことだと思っているフシがある．参考までに，広く知られている以下2点の事実を列挙しておく．ちなみに私は証明を読んだことはない．
\begin{enumerate}
\item $H$を Hilbert 空間とする．$x \in H$に対し，$\varphi_x \in H^*$を$\varphi_x(y) \coloneqq \langle x,y \rangle$で定める．写像$T \colon H \ni x \mapsto \varphi_x \in H^*$は線型同型写像である（Riesz の表現定理）．
\item Riesz の表現定理は，Banach 空間に対しては必ずしも成り立つとは限らない；$V$を Banach 空間とする．写像$\Phi \colon V \to (V^*)^*$を，$\varphi \in V^*$に対して$\Phi(x)(\varphi) \coloneqq \varphi(x)$で定めると，これは単射な線型写像である．これが同型となるような Banach 空間は反射的であると言われる．ということは世の中には反射的でない Banach 空間が存在する．
\end{enumerate}
\end{que}

\begin{defi}
$V$を線型空間とする．$S \colon V^k \to \Real$が多重線型写像，または$V$上の$k$階テンソルであるとは，各変数に関して$S$が線型写像であること，即ち任意の$1 \leq i \leq k$に対して
\begin{itemize}
\item 任意の$v_1, v_2, \dots, v_k, v_i' \in V$に対して$S(v_1, \dots, v_i, \dots, v_k) + S(v_1, \dots, v_i', \dots, v_k) = S(v_1, \dots, v_i + v_i', \dots, v_k)$
\item 任意の$v_1, v_2, \dots, v_k \in V$ならびに$a \in \Real$に対して$S(v_1, \dots, av_i, \dots, v_k) = aS(v_1, \dots, v_i, \dots, v_k)$
\end{itemize}が成り立つことをいう．$V$上の$k$階テンソル全体の集合を$\Tensor^k(V^*)$と書く．$\Tensor^1(V^*)$は$V$の双対空間のことである．
\end{defi}

\begin{que}
$\Tensor^k(V^*)$は線型空間の構造を持つ．やるだけでめんどくさいので証明を省いてます．
\end{que}

\begin{dig}
このノートでは Spivak にならって線型空間としてのテンソル積を構成することはせず，多重線型写像としてしか扱わない．実際にはふたつの線型空間$V,W$のテンソル積と呼ばれる線型空間$V \otimes W$を定義して，その空間の元をテンソルと呼ぶのが行儀良いやり方である．のだが，テンソル積は構成がめんどくさいのに加えて，構成よりも普遍性のほうが大事だと言われている（し，私もそう思う）．それにこのノートの範囲で普遍性の話を出してもあんまり得るものがなさそうな気がした上，Spivak のとおりにやっても Riemann 計量や微分形式の定義には困らない．なので，Spivak のやり方にならうことにした．ちなみに$V \otimes V$のことは$\Tensor^2(V)$とも書く．このノートで$\Tensor^k(V)$が出てこないのはそういうわけである．
\end{dig}

\begin{defi}
$S \in \Tensor^k(V^*)$および$T \in \Tensor^\ell(V^*)$に対して，そのテンソル積$S \otimes T \in \Tensor^{k+\ell}(V^*)$を，
\begin{equation}
S \otimes T(v_1, \dots, v_k, v_{k+1}, \dots, v_{k+\ell}) \coloneqq S(v_1, \dots, v_k) \cdot T(v_{k+1}, \dots, v_{k+\ell})
\end{equation}で定める．
\end{defi}

\begin{que}
$\otimes$は双線型かつ結合的である．すなわち，$S, S_1, S_2 \in \Tensor^k(V^*)$および$T, T_1, T_2 \in \Tensor^\ell(V^*)$，$U \in \Tensor^m(V^*)$，$a\in\Real$に対して，
\begin{itemize}
\item $(S_1 + S_2) \otimes T = S_1 \otimes T + S_2 \otimes T$
\item $S \otimes (T_1 + T_2) = S \otimes T_1 + S \otimes T_2$
\item $(aS) \otimes T = S \otimes (aT) = a(S\otimes T)$
\item $S\otimes (T \otimes U) = (S \otimes T) \otimes U$
\end{itemize}
が成り立つ．やるだけでめんどくさいので証明を省いてます．
\end{que}

\begin{prop}
$\set{v_1, \dots, v_n}$を$V$の基底，$\set{w^1, \dots, w^n}$をその双対基底とする．このとき，
\begin{equation}
\set{ w^{i_1} \otimes \dots \otimes w^{i_k} | 1 \leq i_1, \dots i_k \leq n }
\end{equation}は$\Tensor^k(V^*)$の基底である．したがって$\Tensor^k(V^*)$は$n^k$次元である．
\end{prop}

\begin{proof}
$w^{i_1} \otimes \dots \otimes w^{i_k}$たちが一次独立であることと$\Tensor^k(V^*)$の生成系であることを示せばよい．まず一次独立性を示す．
\begin{equation}
\sum_{1\leq j_1, \dots, j_k \leq n} a_{j_1, \dots, j_k} w^{j_1} \otimes \dots \otimes w^{j_k} = 0
\end{equation}が成り立っていたと仮定する．このとき左辺の線型写像を$(v_{i_1}, \dots, v_{i_k})$（$1 \leq i_1, \dots, i_k \leq n$）に作用させれば$a_{i_1, \dots, i_k}=0$が出るので，一次独立性がわかる．

$\Tensor^k(V^*)$の生成系になっていることを示すために，$T \in \Tensor^k(V^*)$を任意に一つ取る．$u_1, \dots, u_n \in V$を任意に取り，それを基底$\set{v_1, \dots, v_n}$で展開した係数を$a_i^j$のように書く；$u_i \eqqcolon \sum_{j} a_i^j v_j$．このとき，
\begin{align}
T(u_1, \dots, u_n) &= T\left( \sum_{j_1} a_1^{j_1} v_{j_1}, \dots, \sum_{j_n} a_1^{j_n} v_{j_n} \right) \\
&= \sum_{j_1} a_1^{j_1} T\left( v_{j_1},  \sum_{j_2} a_2^{j_2} v_{j_2}, \dots, \sum_{j_n} a_n^{j_n} v_{j_n} \right) \\
&= \dotsb \\
&= \sum_{j_1} a_1^{j_1} a_2^{j_2} \dots a_n^{j_n}  T\left( v_{j_1}, \dots, v_{j_n} \right) \\
&= \sum_{j_1} a_1^{j_1} a_2^{j_2} \dots a_n^{j_n}  w^{j_1} \otimes \dots \otimes w^{j_n}
\end{align}となるので，$w^{i_1} \otimes \dots \otimes w^{i_k}$たちは$\Tensor^k(V^*)$の生成系である．
\end{proof}

\begin{defi}
$f \colon V \to W$を線型写像とする．このとき，$f^* \colon \Tensor^k(W) \to \Tensor^k(V^*)$を，$T \in \Tensor^k(W)$ならびに$v_1, \dots, v_k \in V$に対して$(f^*T) (v_1, \dots, v_k) \coloneqq T(f(v_1), \dots, f(v_n))$と定める．$f^*T$を$f$による$T$の引き戻しという．
\end{defi}

\begin{dig}
$f^*$を何と呼ぶかはやや迷った．多様体上の微分形式に対しては「引き戻し」という言い方をするのが非常に一般的である．のだが，ただの多重線型写像に対して「引き戻し」という言葉遣いをする例はあまり聞かない気がする．とはいえ呼んで悪いことはないだろう．$f^*$を「$f$が引き起こす写像」とか「$f$によって引き起こされた写像」ということも多い．ちなみに$k=1$の場合は$f^*$を$f$の双対写像というのだが，$k > 1$の場合まで双対写像と呼んでいる人は見たことがない．見たことがないだけで，いるかも知れない．
\end{dig}



\begin{exm}手頃な，そして重要なテンソルの例は内積と行列式である．
\begin{itemize}
\item $\Real^n$の標準内積$\langle \cdot, \cdot \rangle \colon \Real^n \times \Real^n \to \Real$は$\Tensor^2((\Real^n)^*)$の元である．ところで，内積は単にテンソルであるというだけではなくて引数入れ替えに関して対称という性質がある．
\item 行列式$A \mapsto \det A$を，ベクトルを$n$個受け取る多重線型写像$\det \colon \Real^n \times \Real^n \dots \times \Real^n \to \Real$とみなせば，$\det \in \Tensor^n((\Real^n)^*)$である．ところで，行列式は単にテンソルであるというだけではなくて引数入れ替えをすると一定のルールのもとで符号が入れ替わるという性質がある．
\end{itemize}
\end{exm}

直前の例で，それぞれは単にテンソルであるだけではないということを述べた．これらの「追加的に充たされている」性質を抽出して定義されるのが対称テンソルや交代テンソルの概念である．

\begin{defi}
\leavevmode
\begin{itemize}
\item $T \in \Tensor^2(V^*)$が非退化であるとは，任意の$v \in V$に対して$T(v,v) \neq 0$であることをいう．$T \in \Tensor^2(V^*)$が正定値であるとは，任意の$0_V \neq v \in V$に対して$T(v,v) > 0$となることをいう．
\item $S \in \Tensor^k(V^*)$が対称テンソルであるとは，任意の$v_1, \dots, v_k \in V$ならびに$i \neq j$に対して，
\begin{equation}
S(v_1,\dots, v_i, \dots, v_j, \dots, v_k) = S(v_1, \dots, v_j, \dots, v_i, \dots, v_k)
\end{equation}
が成り立つことをいう．$V$上の正定値対称2階テンソルのことを$V$の内積という\footnote{内積は正定値なので，自動的に2階テンソルになるから「2階」は余計なのだが，別に書いて損することもないと思ったので明示的に書いた．}．
\item $\omega \in \Tensor^k(V^*)$が交代テンソルであるとは，任意の$v_1, \dots, v_k \in V$ならびに$i \neq j$に対して，
\begin{equation}
\omega(v_1,\dots, v_i, \dots, v_j, \dots, v_k) = -\omega(v_1, \dots, v_j, \dots, v_i, \dots, v_k)
\end{equation}
が成り立つことをいう．$V$上の$k$階交代テンソル全体の集合を$\GrassAlg^k(V^*)$で表す．これは$\Tensor^k(V^*)$の部分空間である．ただし，$k=1$の場合は$\GrassAlg^1(V^*) = \Tensor^1(V^*)$である\footnote{$i \neq j$となるような$i,j$が取れないため，交代テンソルが充たすべき条件は常に空虚に真である．}．
\end{itemize}
\end{defi}

\begin{dig}
Spivak だと交代テンソル全体の記号として$\Omega^k(V)$を使っていたが，このノートでは微分可能多様体$M$上の微分$k$-形式の集合に$\Omega^k(M)$を充てたいので，記号を変えることにした．$\GrassAlg^k(V^*)$という記号も一般的なものだと思う．$\GrassAlg^k(V)$が出てこない理由は，$\Tensor^k(V)$が出てこない理由と同様である．
\end{dig}

特に交代テンソルは微分形式の定義に直結するので，この項で基本的性質を調べておくことにする．それに先立ち，線型代数で行列式を学んだ際に触れたであろう次の事実を思い出しておこう；

\begin{prop}\label{行列式の特徴づけ}
$F \colon M_n(\Real) \to \Real$を，$\Real^n$の元を$n$個受け取る写像とみなす；$F \colon \Real^n \times \dots \times \Real^n \to \Real$．$F$が交代的な多重線型写像であるならば，ある定数$c  \in \Real$が存在して$F = c \cdot \det$が成り立つ．
\end{prop}

この事実を言い換えると，$F \in \GrassAlg^n(\Real^n)$ならば，$F$は$\det$の定数倍になっているということである．これをさらに言い換えれば，$F$は線型空間として1次元である（基底として$\det$が取れる）ということになる．ここでは，より一般的な状況を調べておく；$n$次元線型空間$V$に対して$\GrassAlg^k(V^*)$の基底を列挙することで，その次元が$_nC_k = \frac{n!}{k!(n-k)!}$であることを示す．そのためには外積と呼ばれる操作が必要になる．

\begin{defi}
\leavevmode
\begin{itemize}
\item $T \in \Tensor^k(V^*)$に対して，$\Alt(T) \in \Tensor^k(V^*)$を
\begin{equation}
\Alt(T)(v_1, \dots, v_k) \coloneqq \frac{1}{k!} \sum_{\sigma \in \Sym_k} (\sgn \sigma )T(v_{\sigma(1)}, \dots, v_{\sigma(k)})
\end{equation}で定める．但し，$\Sym_k$は$k$次対称群\footnote{$[k] \coloneqq \set{1, \cdots, k}$と置いて，$\Sym_k \coloneqq \set{ \sigma \colon [k] \to [k] | \sigma は全単射}$を$k$次対称群という．「群」という文字を見たことがあるかどうかはともかくとして，この概念自体は行列式の定義で見かけていると思う．}．$\Alt \colon \Tensor^k(V^*) \to \Tensor^k(V^*)$は線型写像である．すぐ後に見るが，$\Alt(T) \in \GrassAlg^k(V^*)$となることがわかるので，それを踏まえて$\Alt \colon \Tensor^k(V^*) \to \GrassAlg^k(V^*)$を交代化作用素という．頭についている係数のいわれは後でわかる．
\item $\omega \in \GrassAlg^k(V^*)$，$\eta \in \GrassAlg^\ell(V^*)$に対して，その外積$\omega \wedge \eta \in \GrassAlg^{k + \ell}(V^*)$を，
\begin{equation}
\omega \wedge \eta \coloneqq \frac{(k+\ell)!}{k!\ell!} \Alt (\omega \otimes \eta)
\end{equation}で定める．こちらも頭についている係数の所以は後で説明する．
\end{itemize}
\end{defi}

\begin{que}
$\omega \in \GrassAlg^k(V^*)$，$\eta \in \GrassAlg^\ell(V^*)$に対して，$\omega \otimes \eta \in \GrassAlg^{k + \ell}(V^*)$とは限らない．
\end{que}

\begin{que}[*]
交代化作用素と外積の定義を天下りに与えたくない気持ちがあるのだが，あまり良い説明を思いつかない．確かにテンソルを交代テンソルに化かすためには（定数倍を除いて）交代化作用素以上に簡単な方法はないとも思うし，交代性を保つような演算として外積より簡単なものを持ってこいと言われても（定数倍の差はともかく）（少なくとも私は）困るしかない．そんなわけで，「これは自然に思いつく」と言われたとしても，渋い顔をしながら「そうかもしれないですね」と言う以外にないのが正直なところである．ちなみに外冪の函手性を使うのはこのノートの範囲では禁じ手だと思うのでやらない．言い換えると，函手性という概念を知らない人が外冪の函手性に気づけるような筋書きが私の探している「良い説明」である．
\end{que}

\begin{prop}[交代化作用素の基本性質]\label{交代化作用素の基本性質}
\leavevmode
\begin{enumerate}
\item $\omega \in \GrassAlg^k(V^*)$，$\sigma \in \Sym_k$ならびに$v_1, \dots, v_k \in V$に対して$\omega(v_{\sigma(1)},\dots,v_{\sigma(k)}) = (\sgn \sigma)\cdot \omega(v_1, \dots, v_k)$．
\item $T \in \Tensor^k(V^*)$に対して，$\Alt(T) \in \GrassAlg^k(V^*)$．
\item $\omega \in \GrassAlg^k(V^*)$に対して，$\Alt(\omega) = \omega$．
\item $T \in \Tensor^k(V^*)$に対して，$\Alt(\Alt(T)) = \Alt(T)$．
\end{enumerate}
\end{prop}

\begin{proof}
\leavevmode
\begin{enumerate}
\item $\sigma$が互換の場合は交代テンソルの定義そのものである．一般の置換は互換の積に分解できることからよい．
\item $i$と$j$のみを動かしその他を動かさない互換を$(i \ j)$と書くことにして，$\sigma \in \Sym_k$に対し$\sigma' \coloneqq \sigma \circ (i \ j)$と置く．写像$\sigma \mapsto \sigma'$は単射であることに注意すると，$v_1, \dots, v_k \in V$に対して，
\begin{align}
\Alt(T)(v_1, \dots, v_j, \dots, v_i, \dots, v_k) &= \frac{1}{k!} \sum_{\sigma \in \Sym_k} (\sgn \sigma) T(v_{\sigma(1)}, \dots, v_{\sigma(j)}, \dots, v_{\sigma(i)}, \dots, v_{\sigma(k)}) \\
&= \frac{1}{k!} \sum_{\sigma \in \Sym_k} (\sgn\sigma)T(v_{\sigma'(1)}, \dots, v_{\sigma'(i)}, \dots, v_{\sigma'(j)}, \dots, v_{\sigma'(k)}) \\
&= \frac{1}{k!} \sum_{\sigma \in \Sym_k} -(\sgn\sigma')T(v_{\sigma'(1)}, \dots, v_{\sigma'(i)}, \dots, v_{\sigma'(j)}, \dots, v_{\sigma'(k)}) \\
&= \frac{1}{k!} \sum_{\sigma' \in \Sym_k} -(\sgn\sigma')T(v_{\sigma'(1)}, \dots, v_{\sigma'(i)}, \dots, v_{\sigma'(j)}, \dots, v_{\sigma'(k)}) \\
&= -\Alt(T)(v_1, \dots, v_i, \dots, v_j, \dots, v_k)
\end{align}となるからよい．
\item (i) の結果より
\begin{align}
\Alt(\omega) (v_1, \dots, v_k) &= \frac{1}{k!} \sum_{\sigma \in \Sym_k} (\sgn \sigma )\omega(v_{\sigma(1)}, \dots, v_{\sigma(k)}) \\
&= \frac{1}{k!} \sum_{\sigma \in \Sym_k} (\sgn \sigma )(\sgn \sigma)\omega(v_1, \dots, v_k) \\
&= \frac{1}{k!} \sum_{\sigma \in \Sym_k} \omega(v_1, \dots, v_k) \\
&= \omega(v_1,\dots,v_k).
\end{align}
\item (ii) と (iii) よりよい．
\end{enumerate}
\end{proof}

\begin{dig}
証明をよく見ればわかるように，交代化作用素に係数$\frac{1}{k!}$がついているのは$\omega \in \GrassAlg^k(V^*)$に対して$\Alt(\omega) = \omega$を成り立たせるため，別の言い方をすれば$\Alt$が射影作用素としてはたらく，冪等になる（$\Alt^2 = \Alt$が成り立つ）ようにするためである．
\end{dig}

\begin{prop}[外積の基本性質]
\leavevmode
\begin{enumerate}
\item 外積を取る操作は双線型である．即ち，$\omega, \omega_1, \omega_2 \in \GrassAlg^k(V^*)$ならびに$\eta, \eta_1, \eta_2 \in \GrassAlg^\ell(V^*)$，$a \in \Real$を任意に取れば，
\begin{itemize}
\item $\omega \wedge (\eta_1 + \eta_2) = \omega \wedge \eta_1 + \omega \wedge \eta_2$
\item $(\omega_1 + \omega_2) \wedge \eta = \omega_1 \wedge \eta + \omega_2 \wedge \eta_2$
\item $a(\omega \wedge \eta) = (a\omega) \wedge \eta = \omega \wedge (a \eta)$
\end{itemize}が成り立つ．
\item 外積を取る操作は次の意味で引き戻しと可換である；$\omega \in \GrassAlg^k(V^*)$ならびに$\eta \in \GrassAlg^\ell(V^*)$として，$f \colon V \to W$を線型写像とするとき，$f^*(\omega \wedge \eta) = f^*(\omega) \wedge f^*(\eta)$．
\item 外積を取る操作は次の意味で交代的である；$\omega \in \GrassAlg^k(V^*)$ならびに$\eta \in \GrassAlg^\ell(V^*)$に対して$\omega \wedge \eta = (-1)^{k\ell}\eta \wedge \omega$．
\item 外積を取る操作は結合的である．特に，$\omega \in \GrassAlg^k(V^*)$，$\eta \in \GrassAlg^{\ell}(V^*)$，$\theta \in \GrassAlg^m(V^*)$に対して，$(\omega \wedge \eta) \wedge \theta = \omega \wedge(\eta \wedge \theta) = \frac{(k+\ell+m)!}{k! \ell! m!} \Alt(\omega \otimes \eta \otimes \theta)$が成り立つ．
\end{enumerate}
\end{prop}

\begin{proof}
\leavevmode
\begin{enumerate}
\item $\Alt$の線型性と$\otimes$の双線型性よりよい．細かいことはめんどくさいのでさぼりました．
\item めんどくさいのでさぼりました．直接計算すれば (i) よりも簡単に証明できるはず．
\item $\tau \in \Sym_{k + \ell}$を，
\begin{equation}
\tau \coloneqq 
    \begin{pmatrix}
    1 & 2 & \cdots & \ell & \ell+1 & \cdots & \ell + k \\
    k+1 & k+2 & \cdots & k + \ell & 1 & \cdots & k
    \end{pmatrix}
\end{equation}で定めると，$\sgn \tau = (-1)^{k \ell}$である\footnote{いわゆる「あみだくじ」を書いて符号を計算するのが一番簡単だと思う．}．\cref{交代化作用素の基本性質} (i) を繰り返し使うと，
\begin{align}
(\omega \wedge \eta)(v_1,\dots, v_{k+\ell}) &= \frac{1}{(k+\ell)!} \sum_{\sigma \in \Sym_{k+ \ell}} (\sgn \sigma) \omega(v_{\sigma(1)}, \dots, v_{\sigma(k)}) \eta (v_{\sigma(k+1)}, \dots, v_{\sigma(k+\ell)})\\
&= \frac{1}{(k+\ell)!} \sum_{\sigma \in \Sym_{k+ \ell}} (\sgn \sigma)^3 \omega(v_{1}, \dots, v_{k}) \eta (v_{k+1}, \dots, v_{k+\ell})\\
&= \frac{1}{(k+\ell)!} \sum_{\sigma \in \Sym_{k+ \ell}} (\sgn \sigma) \omega(v_{1}, \dots, v_{k}) \eta (v_{k+1}, \dots, v_{k+\ell})\\
&= \frac{1}{(k+\ell)!} \sum_{\sigma \in \Sym_{k+ \ell}} (\sgn \sigma) \omega(v_{\tau(\ell+ 1)}, \dots, v_{\tau(\ell + k)}) \eta (v_{\tau(1)}, \dots, v_{\tau(\ell)})\\
&= \frac{1}{(k+\ell)!} \sum_{\sigma \in \Sym_{k+ \ell}} (\sgn \sigma)(\sgn \tau) \omega(v_{\ell+ 1}, \dots, v_{\ell + k}) \eta (v_{1}, \dots, v_{\ell})\\
&= \frac{(-1)^{k\ell}}{(k+\ell)!} \sum_{\sigma \in \Sym_{k+ \ell}} (\sgn \sigma) \eta (v_{1}, \dots, v_{\ell})\omega(v_{\ell+ 1}, \dots, v_{\ell + k}) \\
&= (-1)^{k\ell}(\eta \wedge \omega)(v_1,\dots, v_{k+\ell}).
\end{align}
\item 証明を3段階に分割する．
\begin{enumerate}
\item $S \in \Tensor^k(V^*)$並びに$T \in \Tensor^\ell(V^*)$に対して$\Alt(S)=0$または$\Alt(T)=0$ならば$\Alt(S \otimes T)=0$となることを示す．議論は同様なので$\Alt(S)=0$の場合のみ証明する．ここでは$\Sym_k$を（$\sigma \in \Sym_k$は$k+1, \dots, k+\ell$を動かさないような$\Sym_{k+\ell}$の元だとみなすことで）$\Sym_{k+\ell}$の部分集合とみなす．
\begin{align}
\sum_{\sigma \in \Sym_k} S(v_{\sigma(1)}, \dots, v_{\sigma(k)})T(v_{\sigma(k+1)}, \dots, v_{\sigma(k + \ell)}) &= \sum_{\sigma \in \Sym_k} S(v_{\sigma(1)}, \dots, v_{\sigma(k)})T(v_{k+1}, \dots, v_{k + \ell}) \\
&= \left(  \sum_{\sigma \in \Sym_k} S(v_{\sigma(1)}, \dots, v_{\sigma(k)}) \right) T(v_{k+1}, \dots, v_{k + \ell}) \\
&=0.
\end{align}
次いで，$\tau \in \Sym_{k+\ell} \setminus \Sym_k$を任意に取る\footnote{ここから先の議論は群の剰余類の考え方を知っていれば見通しがよいと思う．要するに$\Sym_{k+\ell}$を部分群$\Sym_k$の定める右剰余類に分解し，各剰余類において和が0だから全体の和も0であるということを（群の言葉を一切出さずに）議論しているに過ぎない．}．$\Sym_k \tau \coloneqq \set{\sigma \tau | \sigma \in \Sym_k}$と置くと，
\begin{align}
\sum_{\sigma \in \Sym_k \tau} S(v_{\sigma(1)}, \dots, v_{\sigma(k)})T(v_{\sigma(k+1)}, \dots, v_{\sigma(k + \ell)}) &= \sum_{\sigma' \in \Sym_k} S(v_{\sigma'\tau(1)}, \dots, v_{\sigma'\tau(k)})T(v_{\tau(k+1)}, \dots, v_{\tau(k + \ell)}) \\
&= \left(\sum_{\sigma' \in \Sym_k} S(v_{\sigma'\tau(1)}, \dots, v_{\sigma'\tau(k)}) \right) T(v_{\tau(k+1)}, \dots, v_{\tau(k + \ell)}) \\
&= \left(\sum_{\sigma' \in \Sym_k} S(v_{\sigma'(1)}, \dots, v_{\sigma'(k)}) \right) T(v_{\tau(k+1)}, \dots, v_{\tau(k + \ell)}) \\
&=0.
\end{align}ここで，$\Sym_k \cap \Sym_k \tau = \emptyset$が次のようにしてわかる．そうでないとして，$\sigma_0 \in \Sym_k \cap \Sym_k \tau$を取ると，$\sigma_0 = \sigma_1 \tau$となるような$\sigma_1 \in \Sym_k$がある．したがって$\tau = (\sigma_1)^{-1}\sigma_0 \in \Sym_k$となるが，これは$\tau$の定め方に反する．同様に，相異なる$\tau_1, \tau_2 \in \Sym_{k+\ell} \setminus \Sym_k$を取ると$\Sym_k \tau_1 \cap \Sym_k \tau_2 = \emptyset$であることもわかる．以上より，総和$\sum_{\sigma \in \Sym_{k+\ell}}$は$\sum_{\sigma \in \Sym_k} + \sum_{\tau \in \Sym_{k+\ell} \setminus \Sym_k} \sum_{\sigma \in \Sym_k \tau}$の形に分解できる．分解した各々の項が0であることはすでに見たので，全体の総和も0である．
\item $S \in \Tensor^k(V^*), T \in \Tensor^\ell(V^*), U \in \Tensor^m(V^*)$に対して$\Alt(S \otimes T \otimes U) = \Alt(\Alt(S \otimes T) \otimes U) = \Alt(S \otimes \Alt(T \otimes U))$となることを示す．$\Alt$は冪等なので，$\Alt(\Alt(S \otimes T) - S \otimes T)=0$であるから，前段の結果より$\Alt(\Alt(S \otimes T) \otimes U - S \otimes T \otimes U)=0$を得る．他の等式も同様である．
\item 命題を証明する．
\begin{align}
(\omega \wedge \eta) \wedge \theta &= \frac{(k+\ell)!}{k!\ell!}\Alt(\omega \otimes \eta) \wedge \theta \\
&= \frac{(k+\ell)!}{k!\ell!} \frac{(k+\ell+m)!}{(k+\ell)!m!} \Alt(\Alt(\omega \otimes \eta) \otimes \theta) \\
&= \frac{(k+\ell+m)!}{k!\ell!m!} \Alt(\omega \otimes \eta \otimes \theta) \\
\end{align}となる．もう一つの等式も同様にすればよい．
\end{enumerate}
\end{enumerate}
\end{proof}

外積が結合的であることを踏まえて，これ以降は3つ以上の交代テンソルの外積は括弧を省いて$\omega \wedge \eta \wedge \theta$のように書く．

\begin{dig}
交代テンソルに当てる記号として$\omega, \eta, \theta$と進めるのは Spivak にならってのことなのだが，どのような規則性に依るものなのか，何ならどれくらい一般的に使われているのか，私はよく知らない．たぶんそれっぽくてかっこいいギリシャ文字を使っているだけなのではなかろうか．
\end{dig}

さて，$\GrassAlg^k(V^*)$の次元を決定する準備を兼ねて，外積の係数のいわれを解き明かしておくことにする．

\begin{lem}
$\set{v_1, \dots, v_n}$を$V$の基底，$\set{w^1, \dots, w^n}$をその双対基底とする．このとき，$1 \leq i_1 < i_2 < \dots < i_k \leq n$ならば
\begin{equation}
w^{i_1} \wedge \dots \wedge w^{i_k} (v_{i_1}, \dots, v_{i_k}) = 1
\end{equation}が成り立つ．
\end{lem}

\begin{proof}
\begin{align}
w^{i_1} \wedge \dots \wedge w^{i_k} &= k! \Alt(w^{i_1} \otimes \dots \otimes w^{i_k}) \\
&= \sum_{\sigma \in \Sym_k} (\sgn \sigma) w^{\sigma(i_1)} \otimes \dots \otimes w^{\sigma(i_k)}
\end{align}であり，$\sigma \neq \mathrm{id}$であるならば$(\sgn \sigma) w^{\sigma(i_1)} \otimes \dots \otimes w^{\sigma(i_k)} (v_{i_1}, \dots, v_{i_k})=0$であるからよい．
\end{proof}

\begin{dig}
というわけで，外積の頭の係数はこの式（を含むいろいろな式）の見た目をきれいにするためである．直感的には$v_1^* \wedge v_2^* (v_1, v_2)$が$v_1$と$v_2$のなす平行四辺形の面積をはかっていると思える．ここまで実用性のある理由がないように見えなくもないが，いちおうこのあとに出てくる（と思われる）テンソルの成分計算をする際に楽になるという実用上のご利益があると思う．
\end{dig}

\begin{que}[*]
いっぽう，定数倍の差が理論に本質的な影響を与えるかというと，（少なくともこのノートの範囲では）与えないと思う．実際，$\omega \wedge \eta \coloneqq \Alt (\omega \otimes \eta)$と定義する流儀もある．このようにした場合，直感的には$v_1^* \wedge v_2^* (v_1, v_2)$が$v_1$と$v_2$のなす単体の面積をはかっていると思える．森田茂之「微分形式の幾何学」曰くは特性類の一般論を述べるときなどはこちらの係数のほうが都合が良いらしい．たぶん適当な意味での自然性も充たすのだと思う．

他にも$\omega \wedge \eta \coloneqq \sqrt{\frac{(k+\ell)!}{k!\ell!}} \Alt (\omega \otimes \eta)$と定義しても結合則は保たれる．これにも何かしらの幾何学的な意味付けを考えることができるのだと思う．
\end{que}

\begin{thm}
$\set{v_1, \dots, v_n}$を$V$の基底，$\set{w^1, \dots, w^n}$をその双対基底とするとき，
\begin{equation}
\set{w^{i_1} \wedge \dots \wedge w^{i_k} | 1 \leq i_1 < \dots < i_k \leq n}
\end{equation}は$\GrassAlg^k(V^*)$の基底である．したがって$\dim \GrassAlg^k(V^*) = \frac{n!}{k!(n-k)!}$．
\end{thm}

\begin{proof}
一次独立性と生成系になっていることを証明すればよい．

一次独立性を示すために，
\begin{equation}
\sum_{1 \leq j_1 < \dots < j_k \leq n} a_{j_1,\dots,i_k} w^{j_1} \wedge \dots \wedge w^{j_k} = 0
\end{equation}であったと仮定する．$1 \leq j_1 < \dots j_k \leq n$となるような整数の組$(j_1, \dots, j_k)$を取った上で両辺に$(v_{j_1}, \dots, v_{j_k})$を作用させれば$a_{j_1,\dots,j_k}=0$がわかる．

$\omega \in \GrassAlg^k(V^*)$を任意に取れば$\omega \in \Tensor^k(V^*)$なので，
\begin{equation}
\omega \eqqcolon \sum_{i_1, \dots, i_k} a_{i_1,\dots,i_k} w^{i_1} \otimes \dots \otimes w^{i_k}
\end{equation}と展開できる．両辺に交代化作用素を施すことで，
\begin{align}
\Alt(\omega) = \omega &= \sum_{i_1, \dots, i_k} a_{i_1,\dots,i_k} \Alt(w^{i_1} \otimes \dots \otimes w^{i_k}) \\
&= \frac{1}{k!} \sum_{i_1, \dots, i_k} a_{i_1,\dots,i_k} w^{i_1} \wedge \dots \wedge w^{i_k}
\end{align}となるので，生成系であることがわかる．
\end{proof}

したがって特に，$V$が（$\Real^n$でなかったとしても）$n$次元線型空間であるならば，$\dim \GrassAlg^n(V^*)=1$であるとわかる．

$\GrassAlg^k(V^*)$の構造そのものについて調べるのはここまでである．ここからは，$\Tensor^k(V^*)$や$\GrassAlg^k(V^*)$に関連する概念たちを（後の都合のために）定義しておくことにする．

\begin{lem}
$T \in \Tensor^2(V^*)$を$V$の内積とする．このとき，$V$上の基底$\set{v_1, \dots, v_n}$であって，
\begin{equation}
T(v_i, v_j) = \begin{dcases*}
    1 & if $i=j$ \\
    0 & otherwise
  \end{dcases*}
\end{equation}
を充たすようなものが存在する．このような$\set{v_1, \dots, v_n}$を$T$に関する正規直交基底という．
\end{lem}

\begin{proof}
$\Real^n$の場合と同様に Gram-Schmidt の正規直交法によれ．
\end{proof}

\begin{dig}
Kronecker のデルタを使って$T(v_i, v_j) = \delta_{ij}$と書こうかとも思ったのだが，やめた．第1節で述べたとおり，このノートでは意図して添字の上下を書き分けている箇所が多々ある．それを踏まえると，特に何も考えずに下付きの添字を書いたとしても，意図があって下付きになっていると読まれそうな気がしたからである．ここに限った話ではないが，用語や記法は難しさをおぼえることが少なくないと感じる．
\end{dig}

\begin{defi}
線型空間$V$の基底上の二項関係$\sim$を次のように定める；「$\mathcal{V} = \set{v_1, \dots, v_n}$ならびに$\mathcal{W} = \set{w_1, \dots, w_n}$を$V$の基底とし，$w_i \eqqcolon \sum a_i^j v_j$と置く．$\mathcal{V} \sim \mathcal{W}$となるのは，$\det \left(a_i^j\right) > 0$がなりたつとき」．$\sim$は$V$の基底に対する同値関係を定める．この同値関係に関する同値類のことを$V$の向きという．$\set{v_1, \dots, v_n}$が属する向きのことを$[ v_1, \dots, v_n ]$と書き，属さない向きのことを$- [ v_1, \dots, v_n ]$と書く．特に$V=\Real^n$の場合，標準基底$\set{e_1, \dots, e_n}$が属する向き$[e_1, \dots, e_n]$を自然な向き，または右手系といい，右手系でない向きを左手系という．
\end{defi}

\begin{que}
$V$の向きは常に2つ存在する．
\end{que}

\begin{dig}
このノートではここで「右手系」や「左手系」を定義した．ここより前でこれらの言葉を証明に組み込むことはしていない．が，それはそれとして，$\Real^2$や$\Real^3$の場合に「右手系」や「左手系」という言葉を多少なりとも見た人は多いと思う．
\end{dig}

\cref{行列式の特徴づけ}を踏まえれば，行列式$\det$の定義として，$\omega \in \GrassAlg^n(\Real^n)$の元であって$\omega(e_1, \dots, e_n) = 1$を充たすもの，という定義を採っても構わない\footnote{学部の線型代数の講義でいきなり外積代数の一般論を広げてこの定義をするのはとっつきづらくて敬遠される気もする．のだが，同じくらいとっつきにくい（と私は感じる）Leibniz の明示公式は学部1年で教わるのだし，やり方を工夫して外積代数の一般論を学部1年生に仕込めたりしないのだろうか？}．この定義は一般の線型空間$V$に対してそのままは通らないが，内積が与えられているもとで一般化した概念を定義することはできる；

\begin{lem}\label{最高次交代テンソルの変換則}
$\set{v_1, \dots, v_n}$を$V$の基底とし，$\omega \in \GrassAlg^n(V^*)$を任意に取る．更に，$w_1, \dots, w_n \in V$を任意にとり$w_i \eqqcolon \sum a_i^j v_j$と置く．このとき，
\begin{equation}
\omega(w_1, \dots, w_n) = \det \left( a_i^j \right) \omega(v_1, \dots, v_n).
\end{equation}
\end{lem}

\begin{proof}
$\eta \in \Tensor^n(\Real^n)$を次のように定める；$b_i = (b_i^1, \dots, b_i^n) \in \Real^n$（$1 \leq i \leq n$）に対して，
\begin{equation}
\eta (b_1, \dots, b_n) \coloneqq \omega \left(\sum_i b_1^i v_i, \dots, \sum_i b_n^i v_i \right).
\end{equation}$\omega \in \Tensor^n(V^*)$であることから，$\eta \in \GrassAlg^n(\Real^n)$がわかるので，ある定数$c \in \Real$があり，$\eta = c \cdot \det$である．$b_i = e_i$（$\Real^n$の標準基底）の場合を考えることで，$c = \omega(v_1, \dots, v_n)$がわかるから，$\omega(w_1, \dots, w_n) = \eta (a_1, \dots, a_n) = \det \left( a_i^j \right) \omega(v_1, \dots, v_n)$を得る．
\end{proof}

\begin{thm}
$T$を$V$の内積とし，$\set{v_1, \dots, v_n}$を$T$に関する正規直交基底とする．このとき，ある$\omega \in \GrassAlg^n(V^*)$が存在して，$[v_1, \dots, v_n] = [w_1, \dots, w_n]$を充たすような任意の正規直交基底$\set{w_1, \dots, w_n}$に対し$\omega (v_1, \dots, v_n) = 1$を充たす．この$\omega$を，内積$T$および向き$[v_1, \dots, v_n]$の定める$V$の体積要素という．特に，$\Real^n$の標準内積および自然な向きの定める体積要素は行列式$\det$である．
\end{thm}

\begin{proof}
$\set{v_1^*, \dots, v_n^*}$を$\set{v_1, \dots ,v_n}$の双対基底とすれば，$\omega \coloneqq v_1^* \wedge \dots \wedge v_n^*$は$\omega(v_1, \dots ,v_n) = 1$を充たす．$w_i \eqqcolon \sum a_i^j v_j$によって行列$A \eqqcolon \left(a_i^j\right)$を定めれば，$\Real^n$の場合と同様の議論で$A$は直交行列になることがわかるので，$\det A = \pm 1$となる．したがって\cref{最高次交代テンソルの変換則}により，$[v_1, \dots, v_n] = [w_1, \dots, w_n]$であるならば$\omega(w_1, \dots, w_n) = 1$である．
\end{proof}

\begin{prop}
$V = \Real^n$とする．$v_1, \dots, v_{n-1} \in V$を任意にとって固定する．このとき，任意の$w \in V$に対して，次の式を充たすような$z \in V$が一意的に存在する；
\begin{equation}
\langle z,w \rangle = \det\, (v_1, \dots, v_{n-1}, w).
\end{equation}この$z$を$v_1 \times \dots \times v_{n-1}$と書いて，$v_1, \dots, v_{n-1}$のクロス積またはベクトル積という．
\end{prop}

\begin{proof}
$\varphi \colon V \to \Real$を$\varphi(w) \coloneqq \det\, (v_1, \dots, v_{n-1}, w)$で定めれば，$\varphi$は線型写像なので，$\varphi \in V^*$である．したがって\cref{双対空間は縦ベクトル}の結果より任意の$w \in V$に対して$\varphi(w) = \langle z,w \rangle$を充たす$z$が一意的に存在する．
\end{proof}

このクロス積は，背伸びした高校生が学んだり，学部のベクトル解析で見かけるであろうあのクロス積と実際には同じものである．のだが，定義だけをみてもそれがわかる気がしないので，クロス積の諸性質（こちらのほうがまだ見慣れているだろう）を証明しておくことにする；

\begin{prop}[クロス積の基本性質]$V = \Real^n$とする．
\begin{enumerate}
\item クロス積をとる写像$V^{n-1} \ni (v_1, \dots, v_{n-1}) \mapsto v_1 \times \dots \times v_{n-1} \in V$は多重線型である．
\item 任意の$\sigma \in \Sym_{n-1}$に対して，$v_{\sigma(1)} \times \dots \times v_{\sigma(n-1)} = \sgn \sigma (v_1 \times \dots \times v_{n-1})$．
\item 以下$V=\Real^3$とする．$x = \sum_i x^i e_i$ならびに$y = \sum_i y^i e_i$に対して，$x \times y = (x^2y^3 - x^3y^2)e_1 + (x^3y^1 - x^1y^3)e_2 + (x^1y^2 - x^2y^1)e_3$が成り立つ．
\item $\langle x, x \times y \rangle = 0$ならびに$\langle y, x \times y \rangle = 0$である．
\item $\theta$を$x$と$y$のなす角とするとき，$\|x \times y\| = \|x\| \cdot \|y\| \cdot \lvert \sin \theta \rvert$．
\end{enumerate}
\end{prop}

\begin{proof}
\leavevmode
\begin{enumerate}
\item 行列式の多重線型性より従う．
\item 行列式の交代性より従う．
\item Sarrus の公式より$\det \, (x,y,z) = (x^2y^3 - x^3y^2)z^1 + (x^3y^1 - x^1y^3)z^2 + (x^1y^2 - x^2y^1)z^3$であるからよい．
\item 前段の結果と合わせて内積を直接計算せよ．
\item $\det \, (x,y,z)$は$x,y,z \in \Real^3$の張る平行六面体の体積であった．ここで，$z = x \times y / \| x \times y \|$の場合を考えると，$\lvert \det \, (x,y,z) \rvert = \|x \times y\|$である．$\langle x, x \times y \rangle = \langle y, x \times y \rangle = 0$をすでに見たので，$\|x \times y\|$は$x$と$y$が張る平行四辺形の面積である．
\end{enumerate}
\end{proof}

後々でやるかもしれないことを見越して，クロス積に関係するようなしないようなコメントをいくつか付け加えておくことにする\footnote{実のところ，聞きかじりに基づいて「ここでこのコメントを入れておくと後で話のネタが増えるだろう」とヤマを張っているだけである．立てたフラグを回収する保証はない．}；

\begin{exm}
$V = \Real^3$とする．$z \in \Real^3$に対して，$\varphi_z(x,y) \coloneqq \det\, (x,y,z)$によって関数$\varphi_z$を定めると，$\varphi_z \in \GrassAlg^2(\Real^3)$である．直接計算によって，$\varphi_{e_1} = e_2^* \wedge e_3^*$，$\varphi_{e_2} = e_3^* \wedge e_1^*$，$\varphi_{e_3} = e_1^* \wedge e_2^*$がわかるので，$\varphi \colon \Real^3 \in z \mapsto \varphi_z \in \GrassAlg^2(\Real^3)$は同型写像である．この同型は，微分2-形式をベクトル場と同一視する際に用いられる．この仕方の同一視に基づいて得られるベクトル場は物理学において軸性ベクトル場と呼ばれるものであり，通常のベクトル場（物理学では極性ベクトル場という）とは座標変換の際に受ける変換が異なる，ということを気が向いたら見る．古典電磁気学においては，電場は極性ベクトル場であり，磁束密度は軸性ベクトル場である，らしい．
\end{exm}

\begin{exm}
更に，$z = z^1 e_1 + z^2 e_2 + z^3 e_3$に対して$z^* \in \GrassAlg^1(\Real^3)$を，$z^* \coloneqq z^1 e_1^* + z^2 e_2^* + z^3 e_3^*$によって定める．この写像も同型写像であるから，この2つの同型写像を合成して得られる$\GrassAlg^1(\Real^3) \ni z^* \mapsto \varphi_z \in \GrassAlg^2(\Real^3)$も同型写像である．かくして得られた同型写像を$* \colon \GrassAlg^1(\Real^3) \to \GrassAlg^2(\Real^3)$と書いて，Hodge スター作用素という．Hodge スター作用素は微分可能多様体上の Laplacian の定義に直接的に現れるのだが，どうして出てくるのか私はよく納得していない．なのでここで寄り道して定義を出した（が，Laplacian について書くかどうかは未定である）．
\end{exm}

\subsection{ベクトル場}

$\Real^n$におけるベクトル場，ならびにベクトル場に沿った微分を定義する．Stokes の定理までの最短ルートを採るならばベクトル場に沿った微分はやらなくても済むのだが，やらないのも微妙な気がするし，話のネタにもなると思うので，書いてみることにする．なお，これ以降，本ノートの終わりまで，$C^\infty$級たりえるすべてのものは断りなく$C^\infty$級と仮定することがある．


\begin{que}[**]
…というおまじないをかけたが，正直このおまじないがどこでどのように効いてくるのかいまいちよくわかっていない．関数が何回微分されたか等をいちいち気にするのが煩わしいので，それを気にしないで済ませるため，というのはあるのだが，もう少し本質的に効いてくるポイントもあるような気もしている．ひとつには，のちに外微分を局所座標を用いつつ定義するのだが，そこで well-defined なことを証明するのに微分形式が$C^2$級であることが本質的に効く．それ以外にもあるかもしれない．
\end{que}

\begin{defi}
$p \in \Real^n$に対して，$T_p \Real^n \coloneqq \set{(p,v)| v \in \Real^n}$を$p$における接ベクトル空間，あるいは接空間という．$T_p \Real^n$は以下のように加法とスカラー倍を入れることで線型空間の構造を持つ；
\begin{itemize}
\item $(p, v) + (p, v') = (p, v+v')$
\item $a(p,v) = (p, av)$
\end{itemize}
$(p,v) \in T_p \Real^n$のことを$\Tan_p(v)$とも書く．また，$T_p \Real^n$上の標準内積$\langle \cdot, \cdot \rangle_p$を，$\langle \Tan_p(v), \Tan_p(v) \rangle_p \coloneqq \langle v, w \rangle$によって定める．$[\Tan_p(e_1), \dots, \Tan_p(e_n)]$を$T_p \Real^n$の自然な向きと呼ぶ．
\end{defi}

気分としては，$T_p \Real^n$は「$p \in \Real^n$に足を持つベクトルの集合」である．ところで，古典ベクトル解析でベクトル場というものを見たことがあるかもしれない．ベクトル場はしばしば，$\Real^n$の各点にベクトルが生えているかのような図示がなされるが，その数学的な定式化のために接空間を持ち出した．すなわち，ベクトル場とは，各点$p$に対して$p$に足を持つようなベクトルを対応させる写像のこととする；

\begin{dig}
接空間の定義だけ見ても「接して」いる感じが全くしないかもしれないが，それは Euclid 空間が平らだからである．この「接空間」は，曲面のある点における接平面を抽象化したようなものである．のだが，その「曲面」が真っ平らだと「接して」いる感じはしない．

今後も何度か Euclid 空間の性質の良さに文句を言う「余談」が出てくることになるだろう．不思議なものだが，このあたりの概念は Euclid 空間の場合を考えるとかえってわかりにくい，といったケースが頻発するように思う．
\end{dig}

\begin{defi}
$T\Real^n \coloneqq \bigcup_{p \in \Real^n} T_p \Real^n$を$\Real^n$の接ベクトル束，あるいは接束という．$U \subset \Real^n$を開集合とするとき，写像$X \colon U \to T \Real^n$が$U$上のベクトル場であるとは，任意の$p \in \Real^n$に対して$X(p) \in T_p \Real^n$であることをいう．定義域が問題にならない場合は「$U$上の」を省略する．

ベクトル場$X$に対して，$X(p)$のことを$X_p$とも書く．また，$X_p = \Tan_p(v)$であるような$v$のことを$\Vect(X_p)$であらわす．$X,Y$をベクトル場とするとき，これらの和，関数倍，標準内積を，$(X+Y)_p \coloneqq X_p + Y_p$，$(fX)_p \coloneqq f(p) X_p$，$\langle X, Y \rangle (p) \coloneqq \langle X_p, Y_p \rangle_p$によって定める．
\end{defi}

\begin{defi}
ベクトル場$\Real^n \ni p \mapsto \Tan_p(e_i) \in T_p \Real^n$のことを$E_i$と書くことにする．
\end{defi}

\begin{dig}
$\Tan_p(v)$や$\Vect(X_p)$などという記号を採用したのはかなりの苦し紛れであり，おそらくこのノート以外では使われていない記号だと思う．当初はこのノートでは Spivak にならって$(p,v) \in T_p \Real^n$のことを$v_p$と書こうと思っていた．一方，ベクトル場$X$の$p$における値も$X_p$と書いている（この記法もかなり一般的である）．そうすると$_p$という記号が二通りに使われる．結果，$e_i$というのが$\Real^n$の標準基底なのか，各点に標準基底を対応させるようなベクトル場なのかがわからなかったり，「ベクトル場$X$」と書くだけで，各点にベクトル$X \in \Real^n$を対応させる定ベクトル場に見えたりするようになった．さすがに無理があると判断して$v_p$という記号をやめて$\Tan$という記号を導入した．いっぽう$X_p$の第2成分が取れないのも不便なので$\Vect$を導入した．接空間を微分作用素の空間として定義すればこのような悩みを抱えずに済んだような気もするが，この定義は最初に見たときにとっつきにくかったので，使いたくなかった．といった紆余曲折の結果がこれである．

また，ベクトル場の終域をちゃんと明示するためにベクトル束という言葉だけを出した．けれども，このノートではそれ以上のことをするつもりはないので，接空間の和集合，以上のことはいったん考えないつもりである．本当はそうではないらしいのだけど，なにかに困らない限りそのあたりの話に踏み込む予定は（今のところ）ない．
\end{dig}

ベクトル場を考える一つのモチベーションは，ベクトル場に沿った微分操作（方向微分）の概念が作れることである．$\Real^n$の場合だけを考えるのであれば，ベクトル場に沿った微分を定義すること自体はそんなに大変ではない．$f \colon \Real^n \to \Real$を微分可能な関数として，ベクトル場$E_i$に沿った$f$の微分を
\begin{equation}
(E_i f)(p) \coloneqq \lim_{t \to 0} \frac{f(p + t e_i) - f(p)}{t} = \partial_i f (p)
\end{equation}と定めて，一般のベクトル場に沿った微分はこの定義を適切に拡張して定めればよい．

ここで定義を終わりにすることもできなくはないが，まだ考察の余地があるのも事実である；数学的には，上記の定義は微分可能多様体に対して拡張が通らない．物理的にも，ベクトル場はなにかの物理現象のモデリングが主たる用途のひとつなので，特定の座標系に本質的に依存するべきではなく，別の座標系で表現されてよいし，座標変換の際は適切な変換を受けるべきである．これらのことを踏まえて，後々を見越して定義を述べ直し，座標変換にともなうベクトル場の変換則についても述べる．

というわけでここからは，ベクトル場ならびにベクトル場に沿った微分の「座標系によらない実体」を掴むことを当座の目標にする．記号$M$を$M \coloneqq \Real^n$で定める．数学的には$M$は単なる$\Real^n$のコピーなので，標準基底から定まる座標軸がなかば自動で引けてしまうのだが，気持ちとしてはまだ座標軸を一切引いていない空間，という気持ちで読んでほしい．逆に$M$ではなく$\Real^n$と書いたら，標準基底から定まる座標軸を引いたあとの空間を想定している．

\begin{dig}
もちろん，$M$と$\Real^n$が同じものならわざわざ記号を分けなくても数学的には同じものが出てくるはずなので，これ以降の記述は一部に迂遠な部分が現れる．のだが，のちに出てくる「座標軸が自動では引けない状況」（一般の微分可能多様体における議論）への着地をソフトにするために$\Real^n$の場合を見て慣れておく，という意図で遠回りなまま書くことにした．この「座標軸が自動で引けるとは限らないので，自分で都合よく座標軸を引いて考えて，座標軸の引き方に依存しないことを後追いで確かめる」という考え方は微分可能多様体上の考察においてよく用いるのだが，その考えを適用するのがいちばん難しい（勝手に座標軸が引かれてしまう）のが，一番簡単な微分可能多様体であるはずの$\Real^n$である，というのは難しいところと見るべきか，それとも私の考えすぎか．
\end{dig}

\begin{defi}
$X$を$M$上のベクトル場とし，$f \colon M \to \Real$を微分可能な関数とする．このとき，$f$の$X_p$による微分$X_pf \in \Real$を，
\begin{equation}
X_pf \coloneqq \lim_{t \to 0} \frac{f(p + t \Vect(X_p)) - f(p)}{t}
\end{equation}
によって定める．$f$の$X$に沿った微分$Xf \colon M \to \Real$を$(Xf)(p) \coloneqq X_pf$によって定める．
\end{defi}

\begin{defi}
$U \subset M$を開集合とする．$y \colon U \to y(U) \subset \Real^n$が（$C^r$級）微分同相写像のとき，$y = (y^1, \dots, y^n)$を$U$上の$\Real^n$の（$C^r$級）座標系という．
\end{defi}

\begin{dig}
ここで，$y$が「微分」同相写像であることを仮定しているが，ここはずるいことをしたと言える．というのも，$y$の微分可能性について議論するためには$M$の実体が Euclid 空間であることを使わざるを得ないのであるが，それは$M$に標準座標を入れているのではないかと言われると返す言葉がない．

とはいえ，ここで$y$が微分同相ではなく単に同相であるとだけ仮定してしまうと，このあとの議論に支障が出る．微分可能な関数$f \colon M \to \Real$に対して$\partial_i (f \circ y^{-1})$といった関数の微分を考えることで座標軸に沿ったベクトル場の定義をするのだが，$y$が微分同相でないとこのような微分がそもそも考えられなくなってしまう．折り目正しくやるなら，微分可能多様体の教科書よろしく位相空間の話からした上で微分構造の定義をきちんとやり，関数の微分可能性も定義し直すことになるような気がする．が，それらをきちんとやるのは気が遠くなるし，何より私は微分構造まわりの話に興味がない．なのでここでズルをやるのも許してほしい．おそらくここ以外でこの手のズルはしていないような気がするが，していたら教えて下さい．
\end{dig}

\begin{exm}[座標系の例]
\leavevmode
\begin{itemize}
\item $p = \sum_i p^i e_i \in M$に対して$p^i$を対応させる座標関数$\pi^i \colon M \ni p \mapsto p^i \in \Real$を並べて得られる$(\pi^1, \dots, \pi^n)$は座標系である．この座標系を標準座標系といい，今後$x=(x^1, \dots, x^n)$とも書くことにする\footnote{行儀が悪い記号の書き換えなのは自分でもわかっているのだが，$\partial / \partial \pi ^1$とか$d\pi^1$といった記法を採る選択肢はないため，この書き換えを実行することにした．これを踏まえてノートの前半の記号を全部取り替えるべきな気もする．しかしめんどくさいな…}．と仰々しく書いているが，モノとしては$x = \id_{\Real^n}$である．
\item $M = \Real^2$とする．2次元極座標変換$\Real^2 \supset (0, \infty) \times (0, 2\pi) \ni (r,\theta) \mapsto (r \cos \theta, r \sin \theta) \in M$の逆写像は座標系である．この座標系を極座標系という．
\end{itemize}
\end{exm}

ある座標系$y$を選んで考えるときに，しばしば「$M$に座標系$y$を入れる」というような言い方をする．気分としては，座標系を用いて座標軸のない Euclid 空間$M$（の部分集合）を座標軸のある$\Real^n$にうつしている．座標系は微分同相なので，その逆写像を用いて座標軸を$M$に書き込んでいると思ってもよい（砕けた言い方だが，こちらのほうがイメージは湧きやすいだろう）．極座標変換の場合の絵をここに入れるのが絶対によいと思うが，図を入れるのを面倒に感じているので，気が向いたら入れる．勉強会では絵を書いて説明する予定．

\begin{que}
ということで，2次元極座標変換の場合に絵を書いて，上の段落に書いてあることの気持ちを察してください．原点から放射状に引かれる軸と，原点を中心とする円のような軸が描かれるはず．
\end{que}

さて，このようにして描いた座標軸があるときに，座標軸に沿った方向微分を考えることがよくある．この「座標軸に沿った方向微分」は，「座標系から定まるベクトル場に沿った微分」と言い換えることで厳密化できるのだが，厳密な定義の前に，定義を作るための動機づけとなるような具体例を幾つか述べよう．$M=\Real^2$として，$f \colon M \to \Real$を微分可能な関数とするときに，
\begin{itemize}
\item $M$に標準座標系を入れる（要するに通常の Descartes 座標）．$f$の$x^1$軸\footnote{「$x^1$軸」「$x^2$軸」はそれぞれ「$x$軸」「$y$軸」というのが普通だとは思うが，このノートでは一般の座標系に記号$y$を充ててしまったので，あえて普通でない言い方のままにした．}に沿った方向微分は（厳密な定義を知らなくても）$\partial_1 f$のことになってほしいと思うだろう．その直感を尊重するように「ベクトル場$\frac{\partial}{\partial x^1}$に沿った$f$の微分が$\partial_1 f$に一致する」ような$\frac{\partial}{\partial x^1}$を定義したい．同様に$\frac{\partial}{\partial x^2}$も定義したい．
\item $M$に極座標系を入れる．$f$の動径$r$方向の方向微分や偏角$\theta$方向の方向微分を考えることが実用上は多々ある．このような方向微分をするベクトル場$\frac{\partial}{\partial r}$ならびに$\frac{\partial}{\partial \theta}$を定義したい．
\end{itemize}

これらを含むような一般的な形で，座標系から定まるベクトル場を定義する．
\begin{prop}
$y=(y^1, \dots, y^n)$を$U \subset M$上の座標系とする．このとき，$U$上のベクトル場$\frac{\partial}{\partial y^i}$であって，任意の$p \in U$ならびに微分可能な関数$f \colon U \to \Real$に対して
\begin{equation}
\left( \frac{\partial}{\partial y^i} f \right)(p) = \left(\partial_i (f \circ y^{-1}) \right) (y(p))
\end{equation}を充たすようなものが唯一つ存在する．更に，$\left\{ \left(\frac{\partial}{\partial y^i}\right)_p,\dots, \left(\frac{\partial}{\partial y^i}\right)_p \right\}$は$T_pM$の基底をなす．$\frac{\partial}{\partial y^i}$を座標系$y$が定めるベクトル場という．$\frac{\partial}{\partial y^i} f$のことを$\frac{\partial f}{\partial y^i}$とも書く．
\end{prop}

\begin{proof}
$y$が標準座標系$x$の場合は$\partial / \partial x^i \coloneqq E_i$と定めればよい．それ以外の場合は，$F = f \circ x^{-1}$，$G = x \circ y^{-1}$と置いて$\left(\partial_i (f \circ y^{-1}) \right) (y (p)) = \left(\partial_i (f \circ x^{-1} \circ x \circ y^{-1}) \right) (y (p)) = \left(\partial_i (F \circ G) \right) (y (p))$に対して\cref{実用的な方の合成則}を適用すると，
\begin{align}
\left(\partial_i (F \circ G) \right) (y (p)) &= \sum_{j} (\partial_j F)(G(y(p))) \cdot (\partial_i G^j)(y(p))\\
&= \sum_{j} (\partial_j (f \circ x^{-1}))(p) \cdot (\partial_i G^j)(y(p))\\
&= \sum_{j} (\partial_i G^j)(y(p)) \cdot \left(\frac{\partial}{\partial x^i} f\right)(p)\\
\end{align}が成り立つので，
\begin{equation}
\frac{\partial}{\partial y^i} \coloneqq \sum_{j} (\partial_i G^j)(y(p)) \cdot \frac{\partial}{\partial x^i}
\end{equation}と定めればよい．これらが各点$p$で$T_pM$の基底をなすことは，標準座標系の場合は明らかだし，一般の座標系の場合は$(\partial_i G^j)(y(p))$が正則行列であることから従う（正則行列でないとすると，$G = x \circ y^{-1}$が微分同相であることに反する）．
\end{proof}

\begin{dig}$\partial_1 f$はしばしば$\frac{\partial f}{\partial x^1}$とも書かれることがある（というか，こう書くことのほうが一般的である）．極座標に沿った微分もそれぞれ$\frac{\partial f}{\partial r}$とか$\frac{\partial f}{\partial \theta}$などと書かれることが多い．しかし，このノートではあくまでこれらの記法はベクトル場$\frac{\partial}{\partial x^1}$に沿った$f$の微分$\frac{\partial}{\partial x^1}f$のように理解する．このノートでこれらの記法をここまで避けてきた理由のひとつはここにもある\footnote{…と言えば聞こえはいいかもしれないが，そのほうが説明の都合がよいと後で気づいたのが正直なところである．}．Euclid 空間上の関数しか考えないのであれば，この記法をとりわけ避ける必要はなかった．しかし多様体上の関数をベクトル場に沿って微分する際に$\frac{\partial}{\partial x^1}f$という記号が使えないのは非常に厳しい反面，この微分は Euclid 空間上の関数に対する偏微分とは異なる概念である．なので，偏微分に$\frac{\partial}{\partial x^1}f$という記号を充てるのを避けた．Euclid 空間に標準座標系を入れた場合は一致するとはいえ，それは特別な場合に過ぎない，という考えである．

ただ，ベクトル場を表示するのに$\frac{\partial}{\partial x^1}$などという表記を充て続けて他の記号を使わないのは，この歴史的表記を受けてのことであることは間違いないだろう．
\end{dig}

また，上記の証明の過程で行った計算を少し修正することで，ベクトル場の座標変換則を得ることができる；

\begin{prop}
$y=(y^1, \dots, y^n)$ならびに$z = (z^1,\dots, z^n)$を$U \subset M$上の座標系とする．このとき，
\begin{equation}
\left( \frac{\partial}{\partial z^i} \right)_p = \sum_{j} \left( \frac{\partial }{\partial z^i} y^j \right) (p) \cdot \left( \frac{\partial}{\partial y^j} \right)_p
\end{equation}が成り立つ．したがって，ベクトル場の変換則は
\begin{equation}
\frac{\partial}{\partial z^i} = \sum_{j} \frac{\partial y^j}{\partial z^i} \frac{\partial}{\partial y^j}
\end{equation}と書ける．
\end{prop}

\begin{exm}
具体例として，$\Real^2$の場合に標準座標系から極座標系へ変換する公式を導いてみる．極座標系を$P \colon M \ni p \mapsto (r(p), \theta(p)) \in \Real^2$と書き，標準座標系を$p \mapsto (x(p), y(p))$と書くことにする．このとき，上の命題より
\begin{align}
\left( \frac{\partial}{\partial r} \right)_p &= \left( \frac{\partial}{\partial r} x\right)(p) \cdot \left( \frac{\partial}{\partial x} \right)_p + \left( \frac{\partial}{\partial r} y\right)(p) \cdot \left( \frac{\partial}{\partial y} \right)_p, \\
\left( \frac{\partial}{\partial \theta} \right)_p &= \left( \frac{\partial}{\partial \theta} x\right)(p) \cdot \left( \frac{\partial}{\partial x} \right)_p + \left( \frac{\partial}{\partial \theta} y\right)(p) \cdot \left( \frac{\partial}{\partial y} \right)_p
\end{align}が成り立つ．ところで定義より$\left( \frac{\partial}{\partial r} x\right)(p) = \partial_1(x \circ P^{-1})(P(p)) $である．$P(p) \eqqcolon (a,b)$と置けば，$\left( \frac{\partial}{\partial r} x\right)(p) = \cos b$を得る．同様に計算して$\left( \frac{\partial}{\partial r} x\right)(p) = \sin b$，$\left( \frac{\partial}{\partial \theta} x\right)(p) = - a \sin b$，$\left( \frac{\partial}{\partial \theta} y\right)(p) = a \cos b$を得るので，結局
\begin{align}
\left( \frac{\partial}{\partial r} \right)_p &= \cos b \left( \frac{\partial}{\partial x} \right)_p + \sin b \left( \frac{\partial}{\partial y} \right)_p, \\
\left( \frac{\partial}{\partial \theta} \right)_p &= - a\sin b \left( \frac{\partial}{\partial x} \right)_p + a \cos b \left( \frac{\partial}{\partial y} \right)_p
\end{align}となる．このノートの記法としてはインフォーマルな書き方になるものの，
\begin{align}
\frac{\partial}{\partial r} &= \cos \theta \frac{\partial}{\partial x} + \sin \theta \frac{\partial}{\partial y}, \\
\frac{\partial}{\partial \theta} &= - r\sin \theta \frac{\partial}{\partial x} + r \cos \theta \frac{\partial}{\partial y}
\end{align}と書くほうが馴染みのある方も多いだろう．
\end{exm}

\begin{defi}
$y = (y^1, \dots, y^n)$を$U \subset M$上の$C^\infty$級座標系，$X$を$U$上定義されたベクトル場とする．このとき，任意の$p \in U$に対して$\left\{ \left(\frac{\partial}{\partial y^i}\right)_p,\dots, \left(\frac{\partial}{\partial y^i}\right)_p \right\}$は$T_pM$の基底をなすので，ある関数$f_y \colon U \to \Real^n$が一意的に存在して，
\begin{equation}
X_p = \sum_{i} {f_y}^i(p) \left( \frac{\partial}{\partial y^i} \right)_p
\end{equation}が成り立つ．このような表示のことを$y$による$X$の（局所）座標表示と呼ぶ．$X$が$C^\infty$級，あるいは滑らかであるとは，$f_y$が$C^\infty$級であることと定める．
\end{defi}

\begin{que}
上記の「ベクトル場が滑らかである」ことの定義は well-defined である．すなわち，ベクトル場$X$の座標系$z$による座標表示
\begin{equation}
X_p = \sum_{i} {f_z}^i(p) \left( \frac{\partial}{\partial z^i} \right)_p
\end{equation}
に現れる$f_z$が$C^\infty$級であるかどうかは，$C^\infty$級座標系$z$のとり方によらない．
\end{que}

\begin{que}
ベクトル場が滑らかであるとは，直感的には「点$p$を動かすと，$X$の生やすベクトルが滑らかに変化する」ことだと思うだろう．実際それを定義したいのである．ここでは座標系によらない話をはじめてしまったせいで，滑らかさの定義がずいぶんめんどうなことになってしまった．標準座標しか使わないのであれば，次のように定義するのが一番はやいだろう；「ベクトル場$X$が滑らかであるとは，$M \ni p \mapsto \Vect(X_p) \in \Real^n$が$C^\infty$級であることと定める」．さきほど述べた座標系によらない定義は，この定義を踏まえつつ座標依存性を消すことで得られる．特に，座標系として特に標準座標を取って考えれば，ここで述べた handy な定義が復元できる．
\end{que}

というわけで，あえて（もともとある標準座標を一旦切り離して）座標系からベクトル場を定め，そのベクトル場に沿って微分するという操作を定義し，座標を取り替えたときにベクトル場がどのような変換を受けるかを見てきた．後に，一般の微分可能多様体に対しても同様の定義や変換則が通ることを見ていくことにする．

ベクトル場に関する話題について，もう一つだけ述べておく．
\begin{defi}
$M \coloneqq \Real^m$，$N \coloneqq \Real^n$と置く．$U \subset M$を開集合，$f \colon U \to N$を関数とする．更に，$p \in U$を取り，$X_p \in T_pM$とする．このとき，$df_p X_p = df_p (X_p) \in T_{f(p)}N$を，任意の関数$g \colon N \to \Real$に対して$(df_pX_p)(g) = X_p(g \circ f)$を充たすようなものとして定める．この対応によって定まる線型写像$df_p \colon T_pM \to T_{f(p)}N$を，$f$の$p$における微分といい，$p \mapsto df_p$を$df$と書いて$f$の微分という．
\end{defi}

第2節で定義した多変数関数の微分を覚えていれば，それと記号や命名の衝突をしていることに気づかれよう．これは意図的である．先ほどは定義域と終域の次元が揃っている場合を考えて，座標系$y$に沿ったベクトル場$\partial / \partial y^i$を定義した．その定義の際に行った議論を，定義域と終域の次元が揃わないケースも含むような形で反芻してみる．$M \coloneqq \Real^m$，$N \coloneqq \Real^n$と置き，$M$の標準座標を$x_M$で，$N$の標準座標を$x_N$で表すことにする．\cref{実用的な方の合成則}の主張は，$f \colon M \to N$ならびに$g \colon N \to \Real$に対して
\begin{equation}
\partial_i (g \circ f \circ x_M^{-1}) (a) = \sum_{j} \left( \partial_i (x_N \circ f^j \circ x_M^{-1}) \right) (a) \cdot \partial_j (g \circ x_N^{-1}) (f(a))
\end{equation}が成り立つ，と言い換えることができる（$x_M$ならびに$x_N$が写像としては$\id$であることに注意）．これをいま用意した記号を用いて書き換えると，
\begin{equation}
\left( \frac{\partial}{\partial x^i_M} (g \circ f) \right) (a) = \sum_{j} \left( \partial_i (x_N \circ f^j \circ x_M^{-1}) \right) (a) \cdot \left(\frac{\partial}{\partial x_N^j} g\right) (f(a))
\end{equation}
すなわち
\begin{equation}
\left( \frac{\partial}{\partial x^i_M} \right)_a (g \circ f) = \sum_{j} \left( \partial_i (x_N \circ f^j \circ x_M^{-1}) \right) (a) \cdot \left(\frac{\partial}{\partial x_N^j}\right)_{f(a)} g
\end{equation}
を得る．これは先ほどの定義に則れば，
\begin{equation}
df_a \left( \frac{\partial}{\partial x^i_M} \right)_a = \sum_{j} \left( \partial_i (x_N \circ f^j \circ x_M^{-1}) \right) (a) \cdot \left(\frac{\partial}{\partial x_N^j}\right)_{f(a)}
\end{equation}にほかならない．すなわち，線型写像$df_a \colon T_aM \to T_{f(a)}N$を，標準座標系から定まる接ベクトルに関して行列表示すると$f$の Jacobi 行列が得られると言ってもよいし，第2節で定義した$f \colon \Real^m \to \Real^n$の微分$df_a \colon \Real^m \to \Real^n$は，$df_a \colon T_aM \to T_{f(a)}N$の仮の姿に過ぎなかった，とも言えるのである．

\begin{que}
ここでは標準座標系だけをとって議論したが，微分の定義は標準座標系という特殊な座標系に依存していない．したがってもちろん標準座標系以外でも似たような議論が通る．これは（行列計算というより）線型代数の基本的な，しかし（それゆえ）難しい議論であると思う．
\end{que}

微分の定義がそうであったのと同様に，第2節で示した命題の多くは，接空間の間の写像（写像の微分）を用いた装いへと持ち上げることができる．例えば，

\begin{thm}[合成則]
$f \colon M \to N$，$g \colon N \to L$に対して，$d(g \circ f) = dg \circ df$が成り立つ．
\end{thm}

\begin{proof}
$X_p \in T_pM$ならびに$h \colon L \to \Real$を任意に取れば，$d(g \circ f)_p(X_p)(h) = X_p(h \circ g \circ f) = (df_p(X_p))(h \circ g) = ((dg_p)(df_p(X_p)))(h)$である．
\end{proof}

\subsection{微分形式と鎖体}

$M = \Real^n$とし，$y \colon U \to y(U)$を$U \subset M$上の座標系とする．

\begin{defi}
$p \in M$に対して，$T_pM$の双対空間$(T_pM)^*$のことを$T_p^*M$と書いて，$p$における余接空間という．$T_p^*M$も線型空間の構造を持つ．
更に，$y$の定めるベクトル場は$T_pM$の基底$\left\{ \left(\frac{\partial}{\partial y^i}\right)_p,\dots, \left(\frac{\partial}{\partial y^i}\right)_p \right\}$を定めた．この基底に関する双対基底を$\left\{ (dy^1)_p,\dots, \left(dy^n\right)_p \right\}$と書く．
\end{defi}

$dy^i$という表記を採る理由の一部をここで説明する．前項で述べた写像の微分について，やや特別な場合を考察してみる．$f \colon U \to \Real$の$p$における微分$df_p \colon T_pM \to T_{f(p)}\Real$を考える．但し，$f$の終域の$\Real$には座標軸が入っていると考え，それを反映して$T_{f(p)} \Real$は同型写像$T_{f(p)} \Real \ni \frac{\partial}{\partial x} \mapsto 1 \in \Real$によって$\Real$と同一視する．このとき，前項最後の議論から
\begin{equation}
df_p \left( \frac{\partial}{\partial y^i} \right)_p = \left( \partial_i (f \circ y^{-1}) \right) (p) = \left( \frac{\partial}{\partial y^i} f \right) (p)
\end{equation}が従う．特に$f$として座標関数$y^j$を取れば，
\begin{equation}
{dy^j}_p \left( \frac{\partial}{\partial y^i} \right)_p = \left( \frac{\partial}{\partial y^i} y^j \right) (p) = \delta_i^j
\end{equation}がわかるので，特に$y^j$の$p$における微分をあつめた$\left\{ (dy^1)_p,\dots, \left(dy^n\right)_p \right\}$は$\left\{ \left(\frac{\partial}{\partial y^i}\right)_p,\dots, \left(\frac{\partial}{\partial y^i}\right)_p \right\}$の双対基底と同一視できる．ここで走る同一視$T_{f(p)} \Real \simeq \Real$のことは明示的に考えないのがどうやら普通のようである．なので今後も断りなくこの同一視をつかう．

さて，この節の最初で述べた直感を活かすように微分形式を定義する．

\begin{defi}
$U \subset M$を開集合とする．自然数$k \geq 1$に対して$\omega \colon U \to \bigcup_{p \in M} \GrassAlg^k(T_p^*M)$が$U$上の微分$k$-形式，あるいは単に$k$-形式であるとは，任意の$p \in U$に対して$\omega_p \coloneqq \omega(p) \in \GrassAlg^k(T_p^*M)$となることをいう．また，（滑らかな）関数$f \colon U \to \Real$のことを微分0-形式ともいう\footnote{$\Tensor^0(T^*_pM) = \GrassAlg^0(T^*_pM)$の元は「ベクトルを$0$個受け取って実数を返す関数」だと考えれば実数と同一視できる．したがって$f \colon M \to \Real$は$f \colon M \to \bigcup_{p \in M} \GrassAlg^0 (T^*_pM)$ともみなせるので，このような定義をするのだと思う，}．$U$上の微分$k$-形式全体の集合を$\DiffForm^k(U)$と書く．$\omega \in \DiffForm^k(U)$の関数倍$f\omega$のことを$f \wedge \omega$とも書く．
\end{defi}

\begin{que}
微分形式の和，関数倍，外積が（ベクトル場の場合と同様にして）各点ごとに和，関数倍，外積を取る仕方で定義できる．厳密な定義はさぼります．
\end{que}

\begin{defi}
$\omega$を$U$上の$k$-形式とする．このとき，任意の$p \in U$に対して$\left\{ \left( dy^{i_1} \right)_p \wedge \dots \wedge \left( dy^{i_k} \right)_p \ \mid \ 1 \leq i_1 < \dots < i_k \leq n \right\}$は$\bigwedge^k T^*_pM$の基底をなすので，$(i_1, \dots, i_k)$で添字付けられたある関数の族$\set{ f^y_{i_1,i_2,\dots,i_n} \colon U \to \Real | 1 \leq i_1 < \dots < i_k \leq n }$が一意的に存在して，
\begin{equation}
\omega_p = \sum_{1 \leq i_1 < i_2 < \dots i_k \leq n} {f^y_{i_1,i_2,\dots,i_n}}(p) \cdot \left( dy^{i_1} \right)_p \wedge \dots \wedge \left( dy^{i_k} \right)_p
\end{equation}が成り立つ．このような表示のことを$y$による$\omega$の（局所）座標表示と呼ぶ．$\omega$が$C^\infty$級，あるいは滑らかであるとは，すべての$f^y_{i_1,i_2,\dots,i_n}$が$C^\infty$級であることと定める．
\end{defi}

\begin{exm}
上記の定義はお世辞にもわかりやすいとはいえないと思う．定義を理解するために次の例を考える；$f \colon M \to \Real$の$p$における微分$df_p \colon T_pM \to \Real$を考えると，$df_p \in \bigwedge^1(T^*_pM)$なので，特に$df$は微分1-形式である．$df$の座標表示を計算してみよう．$\left\{ (dy^1)_p,\dots, \left(dy^n\right)_p \right\}$は$\bigwedge^1 (T^*_pM)$の基底をなすので，ある関数$g_1, \dots, g_n \colon M \to \Real$が存在して
\begin{equation}
df_p = \sum_i g_i(p) \cdot \left(dy^i \right)_p
\end{equation}と書ける．ところで，すでに$df_p \left( \frac{\partial}{\partial y^i} \right)_p = \left( \frac{\partial}{\partial y^i} f \right) (p)$となることを見たので，$g_i = \left( \frac{\partial}{\partial y^i} f \right)$である．まとめると，
\begin{equation}
df_p = \sum_i \left( \frac{\partial}{\partial y^i} f \right)(p) \cdot \left(dy^i \right)_p
\end{equation}を得る．

ところで，しばしば$f$の「全微分」なる概念を
\begin{equation}
df \coloneqq \sum_i  \frac{\partial f}{\partial y^i}  dy^i
\end{equation}と「定義する」，という言い回しを聞いたことがあるかもしれない\footnote{そして往々にして，右辺，とくに$dy^i$が何なのかはきちんと説明されてこない，ということを私自身経験したことがあり，そのたびに苛立っていた．このようにごまかすのも仕方ないかもしれない，と穏やかに思えるようになったのはごく最近のことである．}．この慣習的な言い回しが意味する正確なところはいま述べたとおりである．
\end{exm}

特に上の例で$f$として座標関数を取れば，微分1-形式の座標変換則を得るに至る．ベクトル場のそれとよく似ているが，しかし異なる変換を受けることを見てほしい．

\begin{prop}
$y=(y^1, \dots, y^n)$ならびに$z = (z^1,\dots, z^n)$を$U \subset M$上の座標系とする．このとき，
\begin{equation}
\left(dz^i\right)_p = \sum_{j} \left( \frac{\partial }{\partial y^j} z^i \right) (p) \cdot \left( dy^j \right)_p
\end{equation}が成り立つ．したがって微分1-形式の変換則は
\begin{equation}
dz^i = \sum_{j} \frac{\partial z^i}{\partial y^j} dy^j
\end{equation}と書ける．
\end{prop}

\begin{dig}
ここまで，ベクトル場と微分1-形式の座標変換則を見てきた．それぞれを再掲すると，
\begin{equation}
\left( \frac{\partial}{\partial z^i} \right)_p = \sum_{j} \left( \frac{\partial }{\partial z^i} y^j \right) (p) \cdot \left( \frac{\partial}{\partial y^j} \right)_p
\end{equation}
ならびに
\begin{equation}
\left(dz^i\right)_p = \sum_{j} \left( \frac{\partial }{\partial y^j} z^i \right) (p) \cdot \left( dy^j \right)_p
\end{equation}である．ここで，総和を取る添字である$j$が，ベクトル場の記号における括線よりも「上側」ならびに「下側」でそれぞれ現れることに注意されたい．このあとの計算で見るように，座標関数の添字を上付きにして，ベクトル場の記号として$\frac{\partial}{\partial y^i}$のようなものを採用すれば，座標変換の際に総和を取るべき添字は必ず「上付き」と「下付き」のセットで現れる．そのことを援用して，「上付き添字と下付き添字が登場した場合は，総和を書かなくとも自動的に和を取ることにする」という規約を採ることがある．この規約を Einstein 規約という．Einstein 規約に則れば，例えば微分1-形式の座標変換則は
\begin{equation}
dz^i = \frac{\partial z^i}{\partial y^j} dy^j
\end{equation}のように書かれることになる．物理などにおけるテンソル計算の際にはしばしば用いられる規約であるし，今後も座標変換に関わる計算を追いかける際に頭に入れておく価値はあると思う．但し，このノートにおいては Einstein 規約は用いず，煩雑なのを承知なうえで総和の添字を明示的に書くつもりである．

座標関数の添字を（おそらく一般的ではないであろう）上付きで表記した理由はここにある．ということを，このノートの最初で説明するのは（できないとまでは言わないが）私にとってはあまり好みなやり方ではなかった．
\end{dig}

より一般に，微分$k$-形式の座標変換則も明示的に書ける．1-形式やベクトル場よりは複雑になるが，他方で積分の変数変換公式を念頭に置くと，この座標変換則は記憶に残りやすいと思う．

\begin{prop}
$y=(y^1, \dots, y^n)$ならびに$z = (z^1,\dots, z^n)$を$U \subset M$上の座標系とする．このとき，$1 \leq i_1 < \dots < i_k \leq n$を充たすような$(i_1, \dots, i_k)$に対して
\begin{equation}
\left(dy^{i_1} \right)_p \wedge \dots \wedge \left(dy^{i_k} \right)_p = \sum_{1 \leq j_1 < \dots < j_k \leq n} \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right) (p) \cdot \left( dz^{j_1} \right)_p \wedge \dots \wedge \left( dz^{j_k} \right)_p
\end{equation}が成り立つ．但し，$\left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right)$は$(a,b)$成分が$\frac{\partial y^{i_a}}{\partial z^{j_b}}$であるような$k \times k$行列をあらわす．特に$n$-形式の場合は記述が少し簡単になり，
\begin{equation}
\left(dy^1 \right)_p \wedge \dots \wedge \left(dy^n \right)_p = \det \left( \frac{\partial y^i}{\partial z^j} \right) (p) \cdot \left( dz^1 \right)_p \wedge \dots \wedge \left( dz^n \right)_p
\end{equation}が成り立つ．
\end{prop}

\begin{proof}
$(j_1, \dots, j_k) \in \Natu^k$を，$1 \leq j_1 < \dots < j_k \leq n$を充たすように任意に一つ取る．以下この証明において，記号を軽くするために添字の$_p$や関数の引数に入る$(p)$を省く．$\set{dz^{j_1} \wedge \dots \wedge dz^{j_k} | 1 \leq j_1< \dots < j_k \leq n }$は$\bigwedge^k(T_p^*M)$の基底をなすので，$dy^{i_1} \wedge \dots \wedge dy^{i_k} = \sum_{1 \leq j_1 < \dots < j_k \leq n} a_{j_1, j_2, \dots, j_k} dz^{j_1} \wedge \dots \wedge dz^{j_k}$と展開したときの展開係数を決定すればよい．接ベクトルの座標変換則と\cref{最高次交代テンソルの変換則}より
\begin{align}
& dy^{i_1} \wedge \dots \wedge dy^{i_k} \left( \frac{\partial}{\partial z^{j_1}}, \dots, \frac{\partial}{\partial z^{j_k}} \right) \\
{}=& dy^{i_1} \wedge \dots \wedge dy^{i_k} \left( \frac{\partial}{\partial z^{j_1}}, \dots, \frac{\partial}{\partial z^{j_k}} \right) \\
{}=& dy^{i_1} \wedge \dots \wedge dy^{i_k} \left( \sum_{\ell=1}^n \frac{\partial y^\ell}{\partial z^{j_1}} \frac{\partial}{\partial y^\ell}, \dots, \sum_{\ell=1}^n \frac{\partial y^\ell}{\partial z^{j_k}} \frac{\partial}{\partial y^\ell} \right) \\
{}=& dy^{i_1} \wedge \dots \wedge dy^{i_k} \left( \sum_{a=1}^k \frac{\partial y^{i_a}}{\partial z^{j_1}} \frac{\partial}{\partial y^{i_a}}, \dots, \sum_{a=1}^k \frac{\partial y^{i_a}}{\partial z^{j_k}} \frac{\partial}{\partial y^{i_a}} \right) \\
{}=& \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right) dy^{i_1} \wedge \dots \wedge dy^{i_k} \left( \frac{\partial}{\partial y^{i_1}}, \dots, \frac{\partial}{\partial y^{i_k}} \right) = \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right)
\end{align}
であるから，展開係数は$\det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right)$とわかる．
\end{proof}

\begin{que}[*]
そんなわけで，この変換則と重積分の変数変換公式とを念頭に置けば，いかにも微分$n$-形式を$\Real^n$上で積分することに意味があるように思えてくる．実際このあと微分形式の積分が定義できてしまうことを見ていく．それにしたってうまく行き過ぎているのだが，なんでこんなにうまくいくのか本当に謎である．交代性を課したことが全てを整えている印象があるが，交代性がどうしてここまで全てをきれいにしてくれるのか．
\end{que}

ここまで，0-形式$f$の微分$df$が1-形式となることを見た．すでに見ているように，$df$を標準基底に関して行列表示すると Jacobi 行列が現れる．というわけで大雑把に言えば$df$は$f$の方向微分に関する情報を全部持っているようなものである．これと似たようなことを一般の$n$-形式に対しても考えることができる；$n$-形式の方向微分とも言えるもの，それが外微分である．

\begin{defi}$\omega \in \DiffForm^n(U)$とし，その座標表示
\begin{equation}
\omega_p = \sum_{1 \leq i_1 < i_2 < \dots < i_k \leq n} {f^y_{i_1,i_2,\dots,i_k}}(p) \cdot \left( dy^{i_1} \right)_p \wedge \dots \wedge \left( dy^{i_k} \right)_p
\end{equation}を考える．このもとで，$\omega$の外微分$d \omega \in \DiffForm^{n+1}(U)$を，
\begin{equation}
d\omega_p \coloneqq \sum_{1 \leq i_1 < i_2 < \dots < i_k \leq n} \left(df^y_{i_1,i_2,\dots,i_k}\right)_p \wedge \left( dy^{i_1} \right)_p \wedge \dots \wedge \left( dy^{i_k} \right)_p
\end{equation}
によって定める．
\end{defi}

\begin{prop}
外微分の定義は well-defined である．すなわち，$y=(y^1, \dots, y^n)$ならびに$z = (z^1, \dots, z^n)$をそれぞれ2つの座標系とするとき，$\omega \in \DiffForm^k(U)$の2通りの座標表示
\begin{equation}
\omega_p = \sum_{1 \leq i_1 < i_2 < \dots < i_k \leq n} {f_{i_1,i_2,\dots,i_k}}(p) \cdot \left( dy^{i_1} \right)_p \wedge \dots \wedge \left( dy^{i_k} \right)_p = \sum_{1 \leq j_1 < j_2 < \dots < j_k \leq n} {g_{j_1,j_2,\dots,j_k}}(p) \cdot \left( dz^{j_1} \right)_p \wedge \dots \wedge \left( dz^{j_k} \right)_p
\end{equation}
に対して，
\begin{equation}
\sum_{1 \leq i_1 < i_2 < \dots < i_k \leq n} \left( {df_{i_1,i_2,\dots,i_k}} \right)_p \wedge \left( dy^{i_1} \right)_p \wedge \dots \wedge \left( dy^{i_k} \right)_p = \sum_{1 \leq j_1 < j_2 < \dots < j_k \leq n} \left( {dg_{j_1,j_2,\dots,j_k}} \right)_p \wedge \left( dz^{j_1} \right)_p \wedge \dots \wedge \left( dz^{j_k} \right)_p
\end{equation}が成り立つ．
\end{prop}

証明に入る前に，これ以降このノートの終わりまで，証明や命題の記述において，記号を軽くするために添字の$_p$や関数の引数に入る$(p)$を省くことがあることを断っておく．この省略をする理由は以降の証明を読んでいけば嫌でもわかる．

\begin{proof}
$\omega$が0-形式の場合は示すべきことはない．微分の線型性より，ある一つの$(i_1, \dots, i_k)$，$1 \leq i_1 < \dots < i_k \leq n$を用いて$\omega_p = f_{i_1,i_2,\dots,i_k}(p) \cdot \left( dy^{i_1} \right)_p \wedge \dots \wedge \left( dy^{i_k} \right)_p$と書ける場合に証明すれば充分である．$k$-形式に対する座標変換則より，
\begin{equation}
\sum_{1 \leq j_1 < \dots < j_k \leq n} g_{j_1,  j_2, \dots, j_k} \dif z^{j_1} \wedge \dots \wedge \dif z^{j_k} = \sum_{1 \leq j_1 < \dots < j_k \leq n} f_{i_1,  i_2, \dots, i_k} \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right) \dif z^{j_1} \wedge \dots \wedge \dif z^{j_k} 
\end{equation}がわかるので，微分の Leibniz 則より
\begin{align}
\sum_{1 \leq j_1 < \dots < j_k \leq n} \dif g_{j_1,  j_2, \dots, j_k} \wedge \dif z^{j_1} \wedge \dots \wedge \dif z^{j_k} =& \sum_{1 \leq j_1 < \dots < j_k \leq n} \left( \dif f_{i_1,  i_2, \dots, i_k} \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right) \right) \wedge \dif z^{j_1} \wedge \dots \wedge \dif z^{j_k} \\
&+ \sum_{1 \leq j_1 < \dots < j_k \leq n} \left( f_{i_1,  i_2, \dots, i_k} \dif \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right) \right) \wedge \dif z^{j_1} \wedge \dots \wedge \dif z^{j_k} \\
=& \dif f_{i_1,  i_2, \dots, i_k} \wedge \dif y^{i_1} \wedge \dots \wedge \dif y^{i_k} \\
&+ \sum_{1 \leq j_1 < \dots < j_k \leq n} \left( f_{i_1,  i_2, \dots, i_k} \dif \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right) \right) \wedge \dif z^{j_1} \wedge \dots \wedge \dif z^{j_k} 
\end{align}を得る．したがって示すべきことは
\begin{equation}
\sum_{1 \leq j_1 < \dots < j_k \leq n} \left( \dif \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right) \right) \wedge \dif z^{j_1} \wedge \dots \wedge \dif z^{j_k} = \sum_{1 \leq j_1 < \dots < j_k \leq n} \left( \sum_{j=1}^n \frac{\partial}{\partial z^j} \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b}} \right) \dif z^j \right) \wedge \dif z^{j_1} \wedge \dots \wedge \dif z^{j_k} = 0
\end{equation}に帰着する．以下，ある程度きちんと証明をつけるが，総じて直接計算による力技なので，多分自分で証明をつけたほうが理解はしやすいです．

以下，$(j_1', \dots, j_k')$，$1 \leq j_1' < \dots < j_k' \leq n$を任意にとって一つ固定する（総和のいちばん外側のループ変数を固定して考えようとしている）．このとき，$j' \in \set{j_1', \dots, j_k'}$であるならば明らかに
\begin{equation}
\frac{\partial}{\partial z^{j'}} \det \left( \frac{\partial y^{i_a}}{\partial z^{j_b'}} \right) \dif z^{j'} \wedge \dif z^{j_1'} \wedge \dots \wedge \dif z^{j_k'} = 0
\end{equation}である．なので，$j' \notin \set{j_1', \dots, j_k'}$の場合だけを考察すればよいから，そのように$j'$を取って固定する（内側のループ変数を固定して考えようとしている）．微分の Leibniz 則を使うと
\begin{align}
&\frac{\partial}{\partial z^{j'}} \det
    \begin{pmatrix}
    \frac{\partial y^{i_1}}{\partial z^{j_1'}} & \dots & \frac{\partial y^{i_1}}{\partial z^{j_p'}} & \dots & \frac{\partial y^{i_1}}{\partial z^{j_k'}} \\
    \vdots & \ddots & \vdots & \ddots & \vdots \\
    \frac{\partial y^{i_k}}{\partial z^{j_1'}} & \dots & \frac{\partial y^{i_k}}{\partial z^{j_p'}} & \dots & \frac{\partial y^{i_k}}{\partial z^{j_k'}} \\
    \end{pmatrix}
\dif z^{j'} \wedge \dif z^{j_1'} \wedge \dots \wedge \dif z^{j_p'} \wedge \dots \wedge \dif z^{j_k'} \\
= & \sum_{p=1}^k \det
    \begin{pmatrix}
    \frac{\partial y^{i_1}}{\partial z^{j_1'}} & \dots & \frac{\partial^2 y^{i_1}}{\partial z^{j'} \partial z^{j_p'}} & \dots & \frac{\partial y^{i_1}}{\partial z^{j_k'}} \\
    \vdots & \ddots & \vdots & \ddots & \vdots \\
    \frac{\partial y^{i_k}}{\partial z^{j_1'}} & \dots & \frac{\partial^2 y^{i_k}}{\partial z^{j'} \partial z^{j_p'}} & \dots & \frac{\partial y^{i_k}}{\partial z^{j_k'}} \\
    \end{pmatrix}
\dif z^{j'} \wedge \dif z^{j_1'} \wedge \dots \wedge \dif z^{j_p'} \wedge \dots \wedge \dif z^{j_k'}
\end{align}と展開できる．この$r$項めを取り出してくると，
\begin{equation}
\det
    \begin{pmatrix}
    \frac{\partial y^{i_1}}{\partial z^{j_1'}} & \dots & \frac{\partial^2 y^{i_1}}{\partial z^{j'} \partial z^{j_r'}} & \dots & \frac{\partial y^{i_1}}{\partial z^{j_k'}} \\
    \vdots & \ddots & \vdots & \ddots & \vdots \\
    \frac{\partial y^{i_k}}{\partial z^{j_1'}} & \dots & \frac{\partial^2 y^{i_k}}{\partial z^{j'} \partial z^{j_r'}} & \dots & \frac{\partial y^{i_k}}{\partial z^{j_k'}} \\
    \end{pmatrix}
\dif z^{j'} \wedge \dif z^{j_1'} \wedge \dots \wedge \dif z^{j_r'} \wedge \dots \wedge \dif z^{j_k'}.
\end{equation}
この項に対して，符号が逆になってちょうど打ち消し合うような項が総和の中に一意的に存在することを示す．$j'$に対する仮定より，$j_q < j' < j_{q+1}$を充たすような整数$q \geq 0$がある（但し，形式的に$j_{0}' = -\infty$，$j_{k+1}' = \infty$と解釈する）．更に$j' < j_r$と仮定して一般性を失わないのでそうする．2階微分の形から，打ち消し合う項が存在するならば，それは総和に現れるループ変数を$(j_1, \dots, j_k) = (j_1', \dots, j_{q}', j', j_{q+1}', \dots, j_{r-1}', j_{r+1}', \dots, j_k'), j = j_r', p = q+1$とした項，すなわち
\begin{equation}
\det
    \begin{pmatrix}
    \frac{\partial y^{i_1}}{\partial z^{j_1'}} & \dots & \frac{\partial^2 y^{i_1}}{\partial z^{j_r'} \partial z^{j'}} & \dots & \frac{\partial y^{i_1}}{\partial z^{j_k'}} \\
    \vdots & \ddots & \vdots & \ddots & \vdots \\
    \frac{\partial y^{i_k}}{\partial z^{j_1'}} & \dots & \frac{\partial^2 y^{i_k}}{\partial z^{j_r'} \partial z^{j'}} & \dots & \frac{\partial y^{i_k}}{\partial z^{j_k'}} \\
    \end{pmatrix}
\dif z^{j_r'} \wedge \dif z^{j_1'} \wedge \dots \wedge \dif z^{j_q'} \wedge \dif z^{j'} \wedge \dif z^{j_{q+1}'} \wedge \dots \wedge \dif z^{j_{r-1}'} \wedge \dif z^{j_{r+1}'} \wedge \dots \wedge \dif z^{j_k'}.
\end{equation}
のほかにはありえない（この時点で一意性は従う）．実際に符号が逆転することは行列式と外積の交代性を用いた直接計算より従う．
\end{proof}

\begin{que}
最後の「従う」は「めんどくさくなったので省いた」の意である．実際に計算してみれば符号だけが変わり打ち消し合うことがわりあいすぐにわかるのだが，議論の内容の割に \LaTeX のコード量がかさばりそうなので億劫になっている．
\end{que}

\begin{dig}
外微分の定義の与え方はいくつか考えられる．ここでは用意する道具立てが少なくて済み（0-形式に対する外微分，すなわち写像の微分さえあれば定義できて），意味が比較的わかりやすい（方向微分の$k$-形式への一般化であることが見てわかる）と思われる定義の与え方を採用した．この方法に欠点がないとは言わない；事実，well-defined なことの証明は軽くはない．このノートに整理して書くにあたり，私自身いろいろと紆余曲折を経たことを正直に述べておく．

well-defined なことが明らかな定義としては Lie 微分を使うものがあるが，（当然ながら）Lie 微分を持ち出してその基本性質を先んじて述べておく必要がある．純粋に代数的な性質だけを列挙して公理的に定義する方法もあるにはあるし，Spivak においては多様体上の微分形式をそのように定義しているのだが，外微分の意味するところがよくわからないままでつらいのではなかろうか．

結局，どの方法にも長所と短所があり，完璧な方法というものはないのだろう．歯がゆさをおぼえるところはあるが，定義一つとっても奥深いものがあると考えるのがよいところなのかもしれない．
\end{dig}

\begin{prop}[外微分の基本性質] $\omega \in \DiffForm^k(U)$，$\eta \in \DiffForm^\ell(U)$とする．
\begin{enumerate}
\item $k=\ell$のとき，$\dif (\omega + \eta) = \dif \omega + \dif \eta$．
\item $\dif (\omega \wedge \eta) = (\dif \omega) \wedge \eta + (-1)^k \omega \wedge \dif \eta$．
\item $\dif (\dif \omega) = 0$．$\dif^2 = 0$と書く場合も多い．
\end{enumerate}
\end{prop}

\begin{proof}
\leavevmode
\begin{enumerate}
\item 0-形式の場合は微分の線型性にほかならず，一般の場合は0-形式の場合の線型性から直ちに出る．
\item $k=0$の場合は外微分の定義そのままである．一般の場合に対しては，外微分の線型性より$\omega = f_{i_1, \dots, i_k} \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k}$，$\eta = g_{j_1, \dots, j_\ell} \dif x^{j_1} \wedge \dots \wedge \dif x^{j_\ell}$と書ける場合に証明すれば充分である．このときは
\begin{align}
\dif (\omega \wedge \eta) 
=& \dif (f_{i_1, \dots, i_k} g_{j_1, \dots, j_\ell}) \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k} \wedge \dif x^{j_1} \wedge \dots \wedge \dif x^{j_\ell} \\
=& (g_{j_1, \dots, j_\ell} \dif f_{i_1, \dots, i_k} + f_{i_1, \dots, i_k}\dif g_{j_1, \dots, j_\ell} ) \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k} \wedge \dif x^{j_1} \wedge \dots \wedge \dif x^{j_\ell} \\
=& g_{j_1, \dots, j_\ell} \dif f_{i_1, \dots, i_k}  \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k} \wedge \dif x^{j_1} \wedge \dots \wedge \dif x^{j_\ell} \\
&+ f_{i_1, \dots, i_k}\dif g_{j_1, \dots, j_\ell} \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k} \wedge \dif x^{j_1} \wedge \dots \wedge \dif x^{j_\ell} \\
=& \dif f_{i_1, \dots, i_k}  \wedge \dif x^{i_1} \wedge \dots \wedge g_{j_1, \dots, j_\ell} \dif x^{i_k} \wedge \dif x^{j_1} \wedge \dots \wedge \dif x^{j_\ell} \\
&+ (-1)^k f_{i_1, \dots, i_k} \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k} \wedge \dif g_{j_1, \dots, j_\ell} \wedge \dif x^{j_1} \wedge \dots \wedge \dif x^{j_\ell} \\
=& (\dif \omega) \wedge \eta + (-1)^k \omega \wedge \dif \eta
\end{align}である．
\item やはり外微分の線型性より，$\omega = f_{i_1, \dots, i_k} \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k}$と書ける場合に示せば充分である．
\begin{align}
\dif \omega = \sum_{s=1}^n \frac{\partial f_{i_1, \dots, i_k}}{\partial x^s} \dif x^s \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k}
\end{align}であるから，
\begin{align}
\dif \dif \omega = \sum_{t=1}^n \sum_{s=1}^n \frac{\partial^2 f_{i_1, \dots, i_k}}{\partial x^t\partial x^s} \dif x^t \wedge \dif x^s \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k}
\end{align}となり，$\frac{\partial^2 f_{i_1, \dots, i_k}}{\partial x^t\partial x^s} \dif x^t \wedge \dif x^s \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k}$と$\frac{\partial^2 f_{i_1, \dots, i_k}}{\partial x^s\partial x^t} \dif x^s \wedge \dif x^t \wedge \dif x^{i_1} \wedge \dots \wedge \dif x^{i_k}$は符号が逆転して打ち消し合うので総和は0である．
\end{enumerate}
\end{proof}

\begin{defi}$M \coloneqq \Real^m$，$N \coloneqq \Real^n$とし，$U \subset N$を開集合とする．このとき，$\omega \in \DiffForm^k(U)$の$f \colon M \to N$による引き戻し$f^* \omega \in \DiffForm^k(f^{-1}(U))$を，$v_1, \dots, v_k \in T_pM$に対して
\begin{equation}
(f^* \omega)_p (v_1, \dots, v_k) \coloneqq \omega_{f(p)} (\dif f_p v_1, \dots, \dif f_p v_k)
\end{equation}とすることで定める．
\end{defi}

\begin{prop}[引き戻しの基本性質] $\omega \in \DiffForm^k(U)$，$\eta \in \DiffForm^\ell(U)$，$U \subset N$を開集合とし，$f \colon M \to N$とする．
\begin{enumerate}
\item $y$を$M$の，$z$を$N$の標準座標系とするとき，$f^*(\dif z^k) = \sum_i \frac{\partial (z^k \circ f)}{\partial y^i} dy^i$．
\item $k = \ell$のとき，$f^*(\omega + \eta) = f^* \omega + f^* \eta$．
\item $f^*(\omega \wedge \eta) = f^* \omega \wedge f^* \eta$．
\item $f^*(\dif \omega) = \dif (f^*(\omega))$．
\end{enumerate}
\end{prop}

\begin{proof}
(i)-(iii) については総じて直接計算なので，(i) のみ示す．$Y = \sum_i Y^i \frac{\partial}{\partial y^i}$を$M$上のベクトル場とするとき，
\begin{align}
f^*(\dif z^k)(Y) = \dif z^k (df (Y)) &= \dif z^k \left( \sum_i Y^i df \frac{\partial}{\partial y^i} \right) \\
&= \dif z^k \left( \sum_i Y^i \sum_j \partial_i (z^j \circ f \circ y^{-1}) \frac{\partial}{\partial z^j} \right) \\
&= \dif z^k \left( \sum_i Y^i \sum_j \frac{\partial (z^j \circ f)}{\partial y^j} \frac{\partial}{\partial z^j} \right) \\
&= \sum_i Y^i \frac{\partial (z^k \circ f)}{\partial y^j}
\end{align}であることから (i) は従う．(ii), (iii) も同様に証明できて，(i) よりかんたんである．

(iv) を示そう．$\omega$の次数に関する帰納法による．$\omega$が0-形式の場合は，$Y$を$U$上のベクトル場とすれば合成則より
\begin{equation}
f^*(\dif \omega)(Y) = \dif \omega (\dif (f Y)) = \dif (\omega \circ f) (Y) = \dif (f^* \omega)(Y)
\end{equation}となるからよい．$k$-形式の場合に示せているとして，外積の線型性より$\omega \wedge \dif x^i$の形の$k+1$-形式に対して示せば充分である．
\begin{align}
f^* (\dif (\omega \wedge \dif x^i)) &= f^* (\dif \omega \wedge \dif x^i) \\
&= (f^* \dif \omega) \wedge (f^* \dif x^i) \\
&= (\dif f^* \omega) \wedge (\dif f^* x^i) \\
&= \dif(f^* \omega \wedge f^* x^i) \\
&= \dif (f^* (\omega \wedge x^i)) \\
\end{align}である．
\end{proof}

\subsection{微分形式の積分と Stokes の定理}